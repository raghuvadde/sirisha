if (window.performance && window.performance.mark) { window.performance.mark('startLoadBundleInner-async'); }
// Copyright (C) Microsoft Corporation. All rights reserved.
define("Mention/Scripts/TFS.Mention",["require","exports","q","VSS/VSS","VSS/Diag","VSS/Utils/Array","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants"],function(n,t,i,r,u,f,e,o){function p(n,t,i,r){var u,f;return r===void 0&&(r="1.0"),u=h.HTML_MENTION_VERSION_ATTR+h.METADATA_ATTR_SEPARATOR+r,i&&(u+=","+i),f=$("<a>").attr("href",n).attr(h.HTML_MENTION_ATTR_NAME,u).text(t),f[0].outerHTML+"&nbsp;"}var h,y,s,l,a,c,v;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n.PATTERN_WORD_START_SEPARATOR="\\s|^|-|\\.|,|:|;|'|\"|\\(";n.PATTERN_WORD_END_SEPARATOR="\\s|$|\\.|,|:|;|-|' | \"|\\)";n.PATTERN_WORD_SEPARATOR="\\s#";n.METADATA_ATTR_SEPARATOR=":";n.HTML_MENTION_ATTR_NAME="data-vss-mention";n.HTML_MENTION_ID_ATTR="id";n.HTML_MENTION_VERSION_ATTR="version";n.HTML_MENTION_LEGACY_HREF_ATTR="mailto";n.HTML_MENTION_VERSION_10=n.HTML_MENTION_VERSION_ATTR+n.METADATA_ATTR_SEPARATOR+"1.0";n.HTML_MENTION_VERSION_20=n.HTML_MENTION_VERSION_ATTR+n.METADATA_ATTR_SEPARATOR+"2.0";n.HTML_MENTION_ID_ATTR_PREFIX=n.HTML_MENTION_ID_ATTR+n.METADATA_ATTR_SEPARATOR;n.HTML_MENTION_LEGACY_FORMAT_HREF=n.HTML_MENTION_LEGACY_HREF_ATTR+n.METADATA_ATTR_SEPARATOR;n.CODE_BLOCK_REGEX="(```[a-z]*[\\s\\S]*?```)|(<pre>[a-z]*[\\s\\S]*?<\/pre>)|(`[a-z]*[\\s\\S]*?`)";n.IDENTITY_PICKER_CONSUMER_ID="0ca36598-9c44-4a19-a3b1-74960b631990";n.DISCUSSION_MESSAGE_CLASS="discussion-messages-messagecontent"}(h=t.Constants||(t.Constants={})),function(n){n.AUTOCOMPLETE_ID="mention-autocomp-id";n.AUTOCOMPLETE_TITLE="mention-autocomp-title"}(y=t.CssClasses||(t.CssClasses={}));t.createHtmlMention=p,function(n){n[n.Text=0]="Text";n[n.Mention=1]="Mention"}(s=t.TextPartType||(t.TextPartType={}));l=function(){function n(n){n===void 0&&(n=c.getDefault());this._parserFactories=[];this._mentionsRenderer=n;e.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WebAccessVersionControlPullRequestsMentions,!1)&&this._parserFactories.push(i.Promise(function(n){r.using(["VersionControl/Scripts/Mentions/PullRequestMentionParser"],function(t){n(function(){return t.createParser()})})}));this._MentionTranslatorFactory=i.Promise(function(n){r.using(["Mention/Scripts/TFS.Mention.People","Mention/Scripts/TFS.Mention.People.Registration"],function(t){n(function(){return t.getDisplayNameStorageKeyTranslatorInstance()})})})}return n.getDefault=function(){return n._defaultInstance||(n._defaultInstance=new n),n._defaultInstance},n.prototype.registerParser=function(n){this._parsers?this._parsers.then(function(t){for(var f,r=n(),e=r.getArtifactType(),i=0,u=t;i<u.length;i++)if(f=u[i],f.getArtifactType()===e)throw new Error("Cannot register additional parser of same artifact type after initialization.");return t.push(r),t}):this._parserFactories.push(i.resolve(n))},n.prototype.setMentionTranslationProvider=function(n){this._mentionTranslationProvider||(this._mentionTranslationProvider=n)},n.prototype.getMentionsRenderer=function(){return this._mentionsRenderer},n.prototype.parseCodeBlocksFromText=function(n){for(var t=[],i=new RegExp(h.CODE_BLOCK_REGEX,"ig"),r;r=i.exec(n);)t.push({start:r.index,end:i.lastIndex});return t},n.prototype.parseInput=function(n){this._parsers||(this._parsers=i.allSettled(this._parserFactories).then(function(n){return n.map(function(n){return n.state=="fulfilled"?n.value():null}).filter(function(n){return n!=null})}));var t=this.parseCodeBlocksFromText(n);return this._parsers.then(function(i){var r=[{Text:n,Type:s.Text,StartIndex:0}],u,f;for(u in i)f=i[u],r=$.map(r,function(n){var i=n;return i.Type===s.Mention?n:f.parseMentions(i.Text,i.StartIndex,t)});return r})},n.prototype.renderParts=function(n,t,i){for(var u,e=this,o=$.Deferred(),r=$(),h=0,f=[],c=0;c<t.length;c++)r=r.add("<span>");return u=function(){h++;h===t.length&&(i.parts=f.join(","),o.resolve(r))},t.forEach(function(n,t){if(n.Type===s.Mention){var i=n;f.push(e._mentionsRenderer.getTelemetryMentionSummary(i));e._mentionsRenderer.renderMention($(r[t]),i).then(function(){u(t)},function(){u(t)})}else f.push("text"),$(r[t]).text(n.Text),u(t)}),r.appendTo(n),o.promise()},n.prototype.translateDisplayNamesToStorageKeysOfPersonMentions=function(n){return n&&this._mentionTranslationProvider?this._mentionTranslationProvider.translateDisplayNamesToStorageKeys(n):n},n.prototype.translateStorageKeysToDisplayNamesOfPersonMentions=function(n){var t=this,r=function(){return t._mentionTranslationProvider&&n?t._mentionTranslationProvider.translateStorageKeysToDisplayNames(n):i.resolve(n)};return this._mentionTranslationProvider?r():this._MentionTranslatorFactory.then(function(n){return t._mentionTranslationProvider||(t._mentionTranslationProvider=n()),r()})},n}();t.MentionProcessor=l;a=function(){function n(){}return n.prototype.parseFromText=function(){throw new Error("Not implemented");},n.prototype.getArtifactType=function(){throw new Error("Not implemented");},n.prototype.parseFromUrl=function(){throw new Error("Not implemented");},n.prototype.isInsideIgnoreBlock=function(n,t,i){var r=!1;return n&&n.forEach(function(n){n.start<t&&n.start<i&&n.end>t&&n.end>i&&(r=!0)}),r},n.prototype.parseMentions=function(n,t,i){var f=[],o,u,e,r;if(n){for(o=this.parseFromText(n),u=0,e=0;e<o.length;e++)r=o[e],r.index.start>u&&f.push({Type:s.Text,Text:n.substring(u,r.index.start),StartIndex:t+u}),this.isInsideIgnoreBlock(i,t+r.index.start,t+r.index.end)?f.push({Type:s.Text,Text:n.substring(r.index.start,r.index.end),StartIndex:t+r.index.start}):f.push({Type:s.Mention,Text:n.substring(r.index.start,r.index.end),ArtifactType:this.getArtifactType(),ArtifactId:r.id,StartIndex:t+r.index.start}),u=r.index.end;n.length>u&&f.push({Type:s.Text,Text:n.substring(u,n.length),StartIndex:t+u})}return f},n}();t.ArtifactMentionParser=a;c=function(){function n(){this._rendererFactories=[];this._vcRendererPromise=e.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WebAccessVersionControlPullRequestsMentions,!1)?i.Promise(function(n){r.using(["VersionControl/Scripts/Mentions/PullRequestMentionRenderer"],function(t){n(t.createRenderer())},function(t){u.logError(t);n(null)})}):i.resolve(null)}return n.getDefault=function(){return n._defaultInstance||(n._defaultInstance=new n),n._defaultInstance},n.prototype.registerProvider=function(n){var i,u,t,r,f;if(this._renderers){for(i=n(),u=i.getArtifactType(),t=0,r=this._renderers;t<r.length;t++)if(f=r[t],f.getArtifactType()===u)throw new Error("Cannot register additional providers of same artifact type after initialization.");this._renderers.push(i)}else this._rendererFactories.push(n)},n.prototype.getRenderer=function(n){var t=this;return this._vcRendererPromise.then(function(i){return t._renderers||(t._renderers=$.map(t._rendererFactories,function(n){return n()}),i&&t._renderers.push(i)),f.first(t._renderers,function(t){return n.ArtifactType===t.getArtifactType()})})},n.prototype.renderMention=function(n,t){return this.getRenderer(t).then(function(i){if(i)return i.renderMention(t,function(t){var i=$(t);return i.appendTo(n),i});throw new Error("No rendering provider found for artifact type");})},n.prototype.getTelemetryMentionSummary=function(n){return this.getRenderer(n).then(function(t){return t?t.getTelemetryMentionSummary(n):null})},n}();t.MentionsRenderer=c;v=function(){function n(n,t,i){this._artifactsLoader=n;this._queueWaitMSec=t;this._maxBatchSize=i;this._cache={};this._queue=[];this._keyPoppedFromQueue={}}return n.prototype.getArtifactPromise=function(n){var t,r;return typeof this._cache[n]!="undefined"?t=this._cache[n]:(r=i.defer(),t=r.promise,this._cache[n]=t,this._queue.push({key:n,deferred:r}),this._keyPoppedFromQueue[n]=!1,this._delayProcessQueue(n)),t},n.prototype._delayProcessQueue=function(n){var t=this;setTimeout(function(){return t._processQueue(n)},this._queueWaitMSec)},n.prototype._processQueue=function(n){var t,i,r;if(!this._keyPoppedFromQueue[n])while(this._queue.length>0){for(i=this._maxBatchSize,this._queue.length<=i?(t=this._queue,this._queue=[]):(t=this._queue.slice(0,i),this._queue=this._queue.slice(i)),r=0;r<t.length;r++)this._keyPoppedFromQueue[t[r].key]=!0;this._processBatch(t)}},n.prototype._processBatch=function(n){var i=n.map(function(n){return n.key}),t=this._artifactsLoader(i);n.forEach(function(n){if(t.hasOwnProperty(n.key)){var i=t[n.key];i.then(function(t){n.deferred.resolve(t)},function(){n.deferred.reject.apply(n.deferred,arguments)})}else n.deferred.reject(new Error("Artifact was missing from results of batch load."))})},n}();t.ArtifactsCache=v});

/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/menu",["jquery", "./core", "./widget", "./position"], n) : n(jQuery) })(function (n) { return n.widget("ui.menu", { version: "1.11.4", defaultElement: "<ul>", delay: 300, options: { icons: { submenu: "ui-icon-carat-1-e" }, items: "> *", menus: "ul", position: { my: "left-1 top", at: "right top" }, role: "menu", blur: null, focus: null, select: null }, _create: function () { this.activeMenu = this.element; this.mouseHandled = !1; this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({ role: this.options.role, tabIndex: 0 }); this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"); this._on({ "mousedown .ui-menu-item": function (n) { n.preventDefault() }, "click .ui-menu-item": function (t) { var i = n(t.target); !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && n(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && this.active.parents(".ui-menu").length === 1 && clearTimeout(this.timer))) }, "mouseenter .ui-menu-item": function (t) { if (!this.previousFilter) { var i = n(t.currentTarget); i.siblings(".ui-state-active").removeClass("ui-state-active"); this.focus(t, i) } }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (n, t) { var i = this.active || this.element.find(this.options.items).eq(0); t || this.focus(n, i) }, blur: function (t) { this._delay(function () { n.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t) }) }, keydown: "_keydown" }); this.refresh(); this._on(this.document, { click: function (n) { this._closeOnDocumentClick(n) && this.collapseAll(n); this.mouseHandled = !1 } }) }, _destroy: function () { this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(); this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () { var t = n(this); t.data("ui-menu-submenu-carat") && t.remove() }); this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content") }, _keydown: function (t) { var i, u, r, f, e = !0; switch (t.keyCode) { case n.ui.keyCode.PAGE_UP: this.previousPage(t); break; case n.ui.keyCode.PAGE_DOWN: this.nextPage(t); break; case n.ui.keyCode.HOME: this._move("first", "first", t); break; case n.ui.keyCode.END: this._move("last", "last", t); break; case n.ui.keyCode.UP: this.previous(t); break; case n.ui.keyCode.DOWN: this.next(t); break; case n.ui.keyCode.LEFT: this.collapse(t); break; case n.ui.keyCode.RIGHT: this.active && !this.active.is(".ui-state-disabled") && this.expand(t); break; case n.ui.keyCode.ENTER: case n.ui.keyCode.SPACE: this._activate(t); break; case n.ui.keyCode.ESCAPE: this.collapse(t); break; default: e = !1; u = this.previousFilter || ""; r = String.fromCharCode(t.keyCode); f = !1; clearTimeout(this.filterTimer); r === u ? f = !0 : r = u + r; i = this._filterMenuItems(r); i = f && i.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : i; i.length || (r = String.fromCharCode(t.keyCode), i = this._filterMenuItems(r)); i.length ? (this.focus(t, i), this.previousFilter = r, this.filterTimer = this._delay(function () { delete this.previousFilter }, 1e3)) : delete this.previousFilter } e && t.preventDefault() }, _activate: function (n) { this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(n) : this.select(n)) }, refresh: function () { var i, t, u = this, f = this.options.icons.submenu, r = this.element.find(this.options.menus); this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length); r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({ role: this.options.role, "aria-hidden": "true", "aria-expanded": "false" }).each(function () { var t = n(this), i = t.parent(), r = n("<span>").addClass("ui-menu-icon ui-icon " + f).data("ui-menu-submenu-carat", !0); i.attr("aria-haspopup", "true").prepend(r); t.attr("aria-labelledby", i.attr("id")) }); i = r.add(this.element); t = i.find(this.options.items); t.not(".ui-menu-item").each(function () { var t = n(this); u._isDivider(t) && t.addClass("ui-widget-content ui-menu-divider") }); t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({ tabIndex: -1, role: this._itemRole() }); t.filter(".ui-state-disabled").attr("aria-disabled", "true"); this.active && !n.contains(this.element[0], this.active[0]) && this.blur() }, _itemRole: function () { return { menu: "menuitem", listbox: "option" }[this.options.role] }, _setOption: function (n, t) { n === "icons" && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu); n === "disabled" && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t); this._super(n, t) }, focus: function (n, t) { var i, r; this.blur(n, n && n.type === "focus"); this._scrollIntoView(t); this.active = t.first(); r = this.active.addClass("ui-state-focus").removeClass("ui-state-active"); this.options.role && this.element.attr("aria-activedescendant", r.attr("id")); this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"); n && n.type === "keydown" ? this._close() : this.timer = this._delay(function () { this._close() }, this.delay); i = t.children(".ui-menu"); i.length && n && /^mouse/.test(n.type) && this._startOpening(i); this.activeMenu = t.parent(); this._trigger("focus", n, { item: t }) }, _scrollIntoView: function (t) { var e, o, i, r, u, f; this._hasScroll() && (e = parseFloat(n.css(this.activeMenu[0], "borderTopWidth")) || 0, o = parseFloat(n.css(this.activeMenu[0], "paddingTop")) || 0, i = t.offset().top - this.activeMenu.offset().top - e - o, r = this.activeMenu.scrollTop(), u = this.activeMenu.height(), f = t.outerHeight(), i < 0 ? this.activeMenu.scrollTop(r + i) : i + f > u && this.activeMenu.scrollTop(r + i - u + f)) }, blur: function (n, t) { (t || clearTimeout(this.timer), this.active) && (this.active.removeClass("ui-state-focus"), this.active = null, this._trigger("blur", n, { item: this.active })) }, _startOpening: function (n) { (clearTimeout(this.timer), n.attr("aria-hidden") === "true") && (this.timer = this._delay(function () { this._close(); this._open(n) }, this.delay)) }, _open: function (t) { var i = n.extend({ of: this.active }, this.options.position); clearTimeout(this.timer); this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"); t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i) }, collapseAll: function (t, i) { clearTimeout(this.timer); this.timer = this._delay(function () { var r = i ? this.element : n(t && t.target).closest(this.element.find(".ui-menu")); r.length || (r = this.element); this._close(r); this.blur(t); this.activeMenu = r }, this.delay) }, _close: function (n) { n || (n = this.active ? this.active.parent() : this.element); n.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active") }, _closeOnDocumentClick: function (t) { return !n(t.target).closest(".ui-menu").length }, _isDivider: function (n) { return !/[^\-\u2014\u2013\s]/.test(n.text()) }, collapse: function (n) { var t = this.active && this.active.parent().closest(".ui-menu-item", this.element); t && t.length && (this._close(), this.focus(n, t)) }, expand: function (n) { var t = this.active && this.active.children(".ui-menu ").find(this.options.items).first(); t && t.length && (this._open(t.parent()), this._delay(function () { this.focus(n, t) })) }, next: function (n) { this._move("next", "first", n) }, previous: function (n) { this._move("prev", "last", n) }, isFirstItem: function () { return this.active && !this.active.prevAll(".ui-menu-item").length }, isLastItem: function () { return this.active && !this.active.nextAll(".ui-menu-item").length }, _move: function (n, t, i) { var r; this.active && (r = n === "first" || n === "last" ? this.active[n === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[n + "All"](".ui-menu-item").eq(0)); r && r.length && this.active || (r = this.activeMenu.find(this.options.items)[t]()); this.focus(i, r) }, nextPage: function (t) { var i, r, u; if (!this.active) { this.next(t); return } this.isLastItem() || (this._hasScroll() ? (r = this.active.offset().top, u = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () { return i = n(this), i.offset().top - r - u < 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]())) }, previousPage: function (t) { var i, r, u; if (!this.active) { this.next(t); return } this.isFirstItem() || (this._hasScroll() ? (r = this.active.offset().top, u = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () { return i = n(this), i.offset().top - r + u > 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items).first())) }, _hasScroll: function () { return this.element.outerHeight() < this.element.prop("scrollHeight") }, select: function (t) { this.active = this.active || n(t.target).closest(".ui-menu-item"); var i = { item: this.active }; this.active.has(".ui-menu").length || this.collapseAll(t, !0); this._trigger("select", t, i) }, _filterMenuItems: function (t) { var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"), r = new RegExp("^" + i, "i"); return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function () { return r.test(n.trim(n(this).text())) }) } }) });

/*!
 * jQuery UI Autocomplete 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/autocomplete",["jquery", "./core", "./widget", "./position", "./menu"], n) : n(jQuery) })(function (n) { return n.widget("ui.autocomplete", { version: "1.11.4", defaultElement: "<input>", options: { appendTo: null, autoFocus: !1, delay: 300, minLength: 1, position: { my: "left top", at: "left bottom", collision: "none" }, source: null, change: null, close: null, focus: null, open: null, response: null, search: null, select: null }, requestIndex: 0, pending: 0, _create: function () { var t, i, r, u = this.element[0].nodeName.toLowerCase(), f = u === "textarea", e = u === "input"; this.isMultiLine = f ? !0 : e ? !1 : this.element.prop("isContentEditable"); this.valueMethod = this.element[f || e ? "val" : "text"]; this.isNewMenu = !0; this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"); this._on(this.element, { keydown: function (u) { if (this.element.prop("readOnly")) { t = !0; r = !0; i = !0; return } t = !1; r = !1; i = !1; var f = n.ui.keyCode; switch (u.keyCode) { case f.PAGE_UP: t = !0; this._move("previousPage", u); break; case f.PAGE_DOWN: t = !0; this._move("nextPage", u); break; case f.UP: t = !0; this._keyEvent("previous", u); break; case f.DOWN: t = !0; this._keyEvent("next", u); break; case f.ENTER: this.menu.active && (t = !0, u.preventDefault(), this.menu.select(u)); break; case f.TAB: this.menu.active && this.menu.select(u); break; case f.ESCAPE: this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(u), u.preventDefault()); break; default: i = !0; this._searchTimeout(u) } }, keypress: function (r) { if (t) { t = !1; (!this.isMultiLine || this.menu.element.is(":visible")) && r.preventDefault(); return } if (!i) { var u = n.ui.keyCode; switch (r.keyCode) { case u.PAGE_UP: this._move("previousPage", r); break; case u.PAGE_DOWN: this._move("nextPage", r); break; case u.UP: this._keyEvent("previous", r); break; case u.DOWN: this._keyEvent("next", r) } } }, input: function (n) { if (r) { r = !1; n.preventDefault(); return } this._searchTimeout(n) }, focus: function () { this.selectedItem = null; this.previous = this._value() }, blur: function (n) { if (this.cancelBlur) { delete this.cancelBlur; return } clearTimeout(this.searching); this.close(n); this._change(n) } }); this._initSource(); this.menu = n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({ role: null }).hide().menu("instance"); this._on(this.menu.element, { mousedown: function (t) { t.preventDefault(); this.cancelBlur = !0; this._delay(function () { delete this.cancelBlur }); var i = this.menu.element[0]; n(t.target).closest(".ui-menu-item").length || this._delay(function () { var t = this; this.document.one("mousedown", function (r) { r.target === t.element[0] || r.target === i || n.contains(i, r.target) || t.close() }) }) }, menufocus: function (t, i) { var r, u; if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) { this.menu.blur(); this.document.one("mousemove", function () { n(t.target).trigger(t.originalEvent) }); return } u = i.item.data("ui-autocomplete-item"); !1 !== this._trigger("focus", t, { item: u }) && t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(u.value); r = i.item.attr("aria-label") || u.value; r && n.trim(r).length && (this.liveRegion.children().hide(), n("<div>").text(r).appendTo(this.liveRegion)) }, menuselect: function (n, t) { var i = t.item.data("ui-autocomplete-item"), r = this.previous; this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = r, this._delay(function () { this.previous = r; this.selectedItem = i })); !1 !== this._trigger("select", n, { item: i }) && this._value(i.value); this.term = this._value(); this.close(n); this.selectedItem = i } }); this.liveRegion = n("<span>", { role: "status", "aria-live": "assertive", "aria-relevant": "additions" }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body); this._on(this.window, { beforeunload: function () { this.element.removeAttr("autocomplete") } }) }, _destroy: function () { clearTimeout(this.searching); this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"); this.menu.element.remove(); this.liveRegion.remove() }, _setOption: function (n, t) { this._super(n, t); n === "source" && this._initSource(); n === "appendTo" && this.menu.element.appendTo(this._appendTo()); n === "disabled" && t && this.xhr && this.xhr.abort() }, _appendTo: function () { var t = this.options.appendTo; return t && (t = t.jquery || t.nodeType ? n(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t }, _initSource: function () { var i, r, t = this; n.isArray(this.options.source) ? (i = this.options.source, this.source = function (t, r) { r(n.ui.autocomplete.filter(i, t.term)) }) : typeof this.options.source == "string" ? (r = this.options.source, this.source = function (i, u) { t.xhr && t.xhr.abort(); t.xhr = n.ajax({ url: r, data: i, dataType: "json", success: function (n) { u(n) }, error: function () { u([]) } }) }) : this.source = this.options.source }, _searchTimeout: function (n) { clearTimeout(this.searching); this.searching = this._delay(function () { var t = this.term === this._value(), i = this.menu.element.is(":visible"), r = n.altKey || n.ctrlKey || n.metaKey || n.shiftKey; t && (!t || i || r) || (this.selectedItem = null, this.search(null, n)) }, this.options.delay) }, search: function (n, t) { return (n = n != null ? n : this._value(), this.term = this._value(), n.length < this.options.minLength) ? this.close(t) : this._trigger("search", t) === !1 ? void 0 : this._search(n) }, _search: function (n) { this.pending++; this.element.addClass("ui-autocomplete-loading"); this.cancelSearch = !1; this.source({ term: n }, this._response()) }, _response: function () { var t = ++this.requestIndex; return n.proxy(function (n) { t === this.requestIndex && this.__response(n); this.pending--; this.pending || this.element.removeClass("ui-autocomplete-loading") }, this) }, __response: function (n) { n && (n = this._normalize(n)); this._trigger("response", null, { content: n }); !this.options.disabled && n && n.length && !this.cancelSearch ? (this._suggest(n), this._trigger("open")) : this._close() }, close: function (n) { this.cancelSearch = !0; this._close(n) }, _close: function (n) { this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", n)) }, _change: function (n) { this.previous !== this._value() && this._trigger("change", n, { item: this.selectedItem }) }, _normalize: function (t) { return t.length && t[0].label && t[0].value ? t : n.map(t, function (t) { return typeof t == "string" ? { label: t, value: t } : n.extend({}, t, { label: t.label || t.value, value: t.value || t.label }) }) }, _suggest: function (t) { var i = this.menu.element.empty(); this._renderMenu(i, t); this.isNewMenu = !0; this.menu.refresh(); i.show(); this._resizeMenu(); i.position(n.extend({ of: this.element }, this.options.position)); this.options.autoFocus && this.menu.next() }, _resizeMenu: function () { var n = this.menu.element; n.outerWidth(Math.max(n.width("").outerWidth() + 1, this.element.outerWidth())) }, _renderMenu: function (t, i) { var r = this; n.each(i, function (n, i) { r._renderItemData(t, i) }) }, _renderItemData: function (n, t) { return this._renderItem(n, t).data("ui-autocomplete-item", t) }, _renderItem: function (t, i) { return n("<li>").text(i.label).appendTo(t) }, _move: function (n, t) { if (!this.menu.element.is(":visible")) { this.search(null, t); return } if (this.menu.isFirstItem() && /^previous/.test(n) || this.menu.isLastItem() && /^next/.test(n)) { this.isMultiLine || this._value(this.term); this.menu.blur(); return } this.menu[n](t) }, widget: function () { return this.menu.element }, _value: function () { return this.valueMethod.apply(this.element, arguments) }, _keyEvent: function (n, t) { (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(n, t), t.preventDefault()) } }), n.extend(n.ui.autocomplete, { escapeRegex: function (n) { return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") }, filter: function (t, i) { var r = new RegExp(n.ui.autocomplete.escapeRegex(i), "i"); return n.grep(t, function (n) { return r.test(n.label || n.value || n) }) } }), n.widget("ui.autocomplete", n.ui.autocomplete, { options: { messages: { noResults: "No search results.", results: function (n) { return n + (n > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate." } } }, __response: function (t) { var i; (this._superApply(arguments), this.options.disabled || this.cancelSearch) || (i = t && t.length ? this.options.messages.results(t.length) : this.options.messages.noResults, this.liveRegion.children().hide(), n("<div>").text(i).appendTo(this.liveRegion)) } }), n.ui.autocomplete });

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Mention/Scripts/TFS.Mention.Helpers",["require","exports","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Host.TfsContext","jQueryUI/autocomplete"],function(n,t,i,r){function h(n,t,i,r){var h;if(typeof n=="undefined"||n===null||t===null||!t.length)return{found:{},highlightedSource:n};t=t.slice(0,e);var c=n.toUpperCase(),l=t.map(function(n){return $.ui.autocomplete.escapeRegex(n)}),o,f={},s=!1;return i===u.Prefix?(t.forEach(function(n){c.indexOf(n.toUpperCase())===0?(s=!0,f[n]=!0):f[n]=!1}),o=new RegExp("^("+l.join("|")+")","ig")):i===u.Contains&&(t.forEach(function(n){c.indexOf(n.toUpperCase())>=0?(s=!0,f[n]=!0):f[n]=!1}),o=new RegExp(l.join("|"),"ig")),h="",h=s&&r?n.replace(o,r):n,{found:f,highlightedSource:h}}function o(){return window.parent!==window}function s(){try{if(o()&&window.parent.TfsMentionHelpers)return window.parent.TfsMentionHelpers.getDefaultTfsContext()}catch(n){}return f.getDefaultTfsContext()}function c(){var n;try{n=s()}catch(t){n=null}return!!n}function l(n,t){return i.delegate(n,t)}function a(n,t,r){var u,f=i.throttledDelegate(n,t,function(){var t=u;u=null;r.apply(n,t)});return function(){return u=arguments,f()}}function v(){return window.location}function y(n){return $("<div>").html(n).text()}function p(n){if(!n)return null;var t=n.ownerDocument;return t?t.defaultView||t.parentWindow:null}function w(n){return n.charCode?!0:!1}var e,u,f;Object.defineProperty(t,"__esModule",{value:!0});e=10,function(n){n[n.Contains=0]="Contains";n[n.Prefix=1]="Prefix"}(u=t.SearchBehavior||(t.SearchBehavior={}));t.searchString=h;t.hasParentWindow=o;t.getMainTfsContext=s;t.environmentIsSupported=c;t.delegate=l;t.throttledDelegate=a;t.getWindowLocation=v;t.convertHtmlToText=y;t.getWindow=p,function(n){function t(){return r.TfsContext.getDefault()}n.getDefaultTfsContext=t}(f=t.TfsMentionHelpers||(t.TfsMentionHelpers={}));t.eventHasPrintableCharacter=w;window.TfsMentionHelpers=f});

var __assign=this&&this.__assign||Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};define("Mention/Scripts/TFS.Social.Telemetry",["require","exports","Mention/Scripts/TFS.Mention.Helpers","VSS/Telemetry/Services","VSS/VSS"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});f=function(){function n(){}return n.MENTION_AREA="Mention",n.WORKITEMS_INITIALIZE_EVENT="WorkitemsInitialize",n.WORKITEMS_CLICK_EVENT="WorkitemsClick",n.PEOPLE_CLICK_EVENT="PeopleClick",n.AUTOCOMPLETE_OPEN_EVENT="AutocompleteOpen",n.AUTOCOMPLETE_SUGGEST_EVENT="AutocompleteSuggest",n.AUTOCOMPLETE_SELECT_EVENT="AutocompleteSelect",n.AUTOCOMPLETE_CANCEL_EVENT="AutocompleteCancel",n.MENTIONABLE_PREVIEW_EVENT="MentionablePreview",n.MENTIONABLE_EDIT_EVENT="MentionableEdit",n.WORKITEMPROVIDER_SEARCHONSERVER_EVENT="WorkItemProvider.SearchOnServer",n.SOCIAL_AREA="Social",n.DISCUSSION_RENDER_EVENT="DiscussionRender",n.DISCUSSION_SHOWMORE_EVENT="DiscussionShowMore",n.MATERIALIZE_IDENTITY="MaterializeIdentity",n.MATERIALIZE_IDENTITY_ERROR="MaterializeIdentityError",n}();t.CustomerIntelligenceConstants=f;e=function(){function n(){}return n.publishAutocompleteOpenEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_OPEN_EVENT,t)},n.publishAutocompleteSuggestEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_SUGGEST_EVENT,t)},n.publishAutocompleteSelectEvent=function(t){var i=t.identity?n._sanitizeIdentityEvent({identity:t.identity}):{identity:undefined};n.delayedPublish(f.AUTOCOMPLETE_SELECT_EVENT,__assign({},t,{identity:i.identity}))},n.publishAutocompleteCancelEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_CANCEL_EVENT,t)},n.publishWorkItemsInitializeEvent=function(t){n.delayedPublish(f.WORKITEMS_INITIALIZE_EVENT,t)},n.publishWorkItemsClickEvent=function(t){n.delayedPublish(f.WORKITEMS_CLICK_EVENT,t)},n.publishPeopleClickEvent=function(t,i){var r=n._sanitizeIdentityEvent(t);n.delayedPublish(f.PEOPLE_CLICK_EVENT,$.extend({},r,i))},n.publishMentionableEditEvent=function(t){n.delayedPublish(f.MENTIONABLE_EDIT_EVENT,t)},n.publishMentionablePreviewEvent=function(t){n.delayedPublish(f.MENTIONABLE_PREVIEW_EVENT,t)},n.publishDiscussionRenderEvent=function(t){n.delayedPublish(f.DISCUSSION_RENDER_EVENT,t,f.SOCIAL_AREA)},n.publishDiscussionShowMoreClickEvent=function(t){n.delayedPublish(f.DISCUSSION_SHOWMORE_EVENT,t,f.SOCIAL_AREA)},n.publishMaterializeIdentityEvent=function(t){var i=n._sanitizeIdentityEvent(t);n.delayedPublish(f.MATERIALIZE_IDENTITY,i)},n.publishMaterializeIdentityError=function(t){var i=n._sanitizeIdentityEvent(t);n.delayedPublish(f.MATERIALIZE_IDENTITY_ERROR,i)},n._sanitizeIdentityEvent=function(n){var t=n.identity,i=n.error;return{identity:{localId:t.localId,entityType:t.entityType,originId:t.originId,originDirectory:t.originDirectory,active:t.active},error:i}},n._getTfsContext=function(){return n.tfsContext||(n.tfsContext=i.getMainTfsContext()),n.tfsContext},n._extendProperties=function(t){var i=n._getTfsContext().navigation.projectId;t=t||{};t.projectId=""+i},n.delayedPublish=function(t,i,u){u===void 0&&(u=f.MENTION_AREA);n._extendProperties(i);r.publishEvent(new r.TelemetryEventData(u,t,i))},n.publish=function(t,i){n._extendProperties(i);r.publishEvent(new r.TelemetryEventData(f.MENTION_AREA,t,i))},n}();t.EventLogging=e;u.tfsModuleLoaded("TFS.Social.Telemetry",t)});

var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define("VSS/Controls/Panels",["require","exports","VSS/Ajax","VSS/Controls","VSS/Diag","VSS/Resources/VSS.Resources.Platform","VSS/Controls/StatusIndicator","VSS/Utils/Core","VSS/Utils/UI","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h){var a,v;Object.defineProperty(t,"__esModule",{value:!0});var c=s.domElem,y=h.getErrorMessage,l=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({collapsed:!0,iconCss:"icon",iconCollapseCss:"bowtie-icon bowtie-toggle-tree-collapsed",iconExpandCss:"bowtie-icon bowtie-toggle-tree-expanded"},t))},t.prototype._swapDefaultToggleIconForCustom=function(n){this._$toggleIcon.remove();this._$toggleIcon=n;this._header.addClass(t._defaultToggleIconOverrideClass)},t.prototype._createControl=function(){var t=this,n=this._options;return this._isDisabled=!1,n.hoverCss&&this.getElement().hover(function(){$(this).addClass(n.hoverCss)},function(){$(this).removeClass(n.hoverCss)}),this._header=$(c("div","tfs-collapsible-header")),this._options.headerNotFocusable?this._header.attr("role","presentation"):this._header.attr({tabIndex:"0",role:"button","aria-expanded":String(this.isExpanded())}),n.headerCss&&this._header.addClass(n.headerCss),this._header.bind("click.CollapsiblePanel",function(){return t.toggleExpandedState()}),this._header.bind("keydown",function(n){if(n.target===n.currentTarget&&(n.keyCode===s.KeyCode.ENTER||n.keyCode===s.KeyCode.SPACE)&&!s.KeyUtils.isModifierKey(n))return t.toggleExpandedState()}),this._header.bind("mouseenter focus",function(n){return n.preventDefault(),t._header.addClass("focus"),!1}),this._header.bind("mouseleave blur",function(n){return n.preventDefault(),t._header.removeClass("focus"),!1}),this._$toggleIcon=$(c("span","tfs-collapsible-collapse")).attr("aria-hidden","true").addClass(n.iconCss).addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),n.collapseCss&&this._$toggleIcon.addClass(n.collapseCss),this._header.append(this._$toggleIcon),this.getElement().append(this._header),this._content=$(c("div","tfs-collapsible-content")),n.contentCss&&this._content.addClass(n.contentCss),n.collapsed&&this._content.hide(),this.getElement().append(this._content),this.getElement()},t.prototype._createIn=function(t){n.prototype._createIn.call(this,t);this._createControl()},t.prototype._enhance=function(n){if(this._options.collapsed=n.hasClass("collapsed"),this._createElement(),this._createControl(),n.after(this.getElement()),this.appendContent(n),this._options.headerText)this.appendHeaderText(this._options.headerText);else if(this._options.headerContent)this.appendHeader(this._options.headerContent),this._options.customToggleIcon&&this._swapDefaultToggleIconForCustom(this._options.customToggleIcon);else{var t=n.attr("title");t&&(n.hasClass("header")&&(n.removeClass("header"),this._header.addClass("header")),this.appendHeader(t))}},t.prototype.replaceHeaderTextIfPresent=function(n){return $("span.tfs-collapsible-text",this._header).text(n)},t.prototype.appendHeaderText=function(n){this._header.attr("title",n);var t=$("<span/>").text(n).addClass("tfs-collapsible-text");return(this._options.headingLevel===undefined||this._options.headingLevel>0)&&t.attr({role:"heading","aria-level":this._options.headingLevel?String(this._options.headingLevel):"2"}),this.appendHeader(t)},t.prototype.appendHeader=function(n){return this._header.append(n),this},t.prototype.prependHeader=function(n){return this._header.prepend(n),this},t.prototype.appendContent=function(n){var i=this._options,t;return $.isFunction(n)?i.collapsed?(this._dynamicContents||(this._dynamicContents=[]),this._dynamicContents.push(n)):t=n.call(this):t=n,t&&typeof t!="function"&&(this._content.append(t),this.getElement().removeClass("collapsed")),this},t.prototype.isExpanded=function(){return this._options.collapsed?!1:!0},t.prototype.expand=function(){this.isExpanded()||this.toggleExpandedState()},t.prototype.collapse=function(){this.isExpanded()&&this.toggleExpandedState()},t.prototype.toggleExpandedState=function(){var n=this._options,r=this._content,o=this._dynamicContents,u,i,f,e;if(this._isDisabled)return!1;if(n.collapsed=!n.collapsed,u=this._$toggleIcon,u.removeClass(n.iconCollapseCss+" "+n.iconExpandCss),u.addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),this._options.headerNotFocusable||this._header.attr("aria-expanded",String(!n.collapsed)),n.collapsed)r.hide(),n.expandCss&&this.getElement().removeClass(n.expandCss),this._fire(t.EVENT_CONTENT_COLLAPSED);else{if(o){for(i=0,f=o;i<f.length;i++)e=f[i],typeof e=="function"&&r.append(e.apply(undefined));this._dynamicContents=null}r.show();n.expandCss&&this.getElement().addClass(n.expandCss);this._fire(t.EVENT_CONTENT_EXPANDED)}if(this._options.onToggleCallback&&$.isFunction(this._options.onToggleCallback))this._options.onToggleCallback(this.isExpanded());return!1},t.prototype.setDisabled=function(n){this._isDisabled!==n&&(n?(this._header.addClass("disabled"),this._$toggleIcon.hide(),this._header.removeAttr("tabindex")):(this._header.removeClass("disabled"),this._$toggleIcon.show(),this._header.attr("tabindex","0")),this._isDisabled=n)},t.prototype.isCollapsiblePanelDisabled=function(){return this._isDisabled},t.EVENT_CONTENT_EXPANDED="collapsible-panel-expanded",t.EVENT_CONTENT_COLLAPSED="collapsible-panel-collapsed",t.enhancementTypeName="tfs.collapsiblepanel",t._defaultToggleIconOverrideClass="custom-toggle-icon",t}(r.Control);t.CollapsiblePanel=l;r.Enhancement.registerJQueryWidget(l,"collapsible");r.Enhancement.registerEnhancement(l,".tfs-collapsible");a=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"ajax-panel",replaceContent:!0,cache:!0},t))},t.prototype.initialize=function(){var t=this._options.url;n.prototype.initialize.call(this);t&&this.beginLoad(t,this._options.urlParams,this._options.success,this._options.error)},t.prototype._dispose=function(){this._cancelPendingLoad();n.prototype._dispose.call(this)},t.prototype.beginLoad=function(n,t,s,h){var l=this,c,a;u.logTracePoint("AjaxPanel.beginLoad.start");this._cancelPendingLoad();c=new o.Cancelable(this);this._cancelable=c;this.getElement().empty();this._options.showStatusIndicator!==!1&&(a=r.BaseControl.createIn(e.StatusIndicator,this.getElement(),{center:!0,imageClass:"big-status-progress",message:f.Loading}),a.start());this._element.attr("aria-busy","true");i.issueRequest(n,{type:"GET",data:t,dataType:"html",traditional:!0,cache:this._options.cache}).then(c.wrap(function(n){l.onLoadCompleted(n);$.isFunction(s)&&s.call(self,n)}),c.wrap(function(n){var t;$.isFunction(h)&&(t=h.call(self,n)===!0);l.onLoadError(n,t)}))},t.prototype.onLoadCompleted=function(n){this.getElement()&&this._options.replaceContent&&(this.getElement().empty(),this.getElement().html(n),r.Enhancement.ensureEnhancements(this.getElement()));this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.onLoadError=function(n,t){t||this.showError(n);this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.showError=function(n){this.getElement().empty();$(c("div","error")).appendTo(this.getElement()).text(y(n))},t.prototype._cancelPendingLoad=function(){this._cancelable&&(this._cancelable.cancel(),this._cancelable=null)},t.enhancementTypeName="tfs.ajaxPanel",t}(r.Control);t.AjaxPanelO=a;v=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(a);t.AjaxPanel=v});

var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};define("VSS/Controls/Dialogs",["require","exports","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/Navigation/HubsService","VSS/Controls/Panels","VSS/Controls/PopupContent","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Accessibility","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","q","jQueryUI/core","jQueryUI/button","jQueryUI/dialog","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function rt(n,t){t&&a.BrowserCheckUtils.isEdge()&&$.each(t,function(t,i){var r=i.click;r&&(i.click=function(t){t&&!$(t.currentTarget).is(":disabled")&&r.apply(n[0],arguments)})})}function ut(n,t){var r=t||"",i;return i=typeof n=="string"?n.split(" "):n,r.split(" ").concat(i).filter(function(n,t,i){return i.indexOf(n)===t}).join(" ")}function st(n,t){return w.show(n,t)}function ht(n,t){return b.showMessageDialog(n,t)}function ct(n,t){return ht(n,{title:t||s.UnsavedChangesMessageTitle,noDefaultButton:!0,buttons:[{id:"leave",text:s.UnsavedChangesLeaveButton,reject:!1},{id:"stay",text:s.UnsavedChangesStayButton,reject:!0},]})}var p,it,k,w,d,g,nt,ft,et,tt,b,ot;Object.defineProperty(t,"__esModule",{value:!0});p=c.delegate;it=a.domElem,function(){var n=[".ms-Layer"];$.widget("ui.dialog",$.ui.dialog,{_allowInteraction:function(t){var i,r,u;if(this._super(t)||a.BrowserCheckUtils.isFirefox()&&t.type==="focusin"&&t.target==document)return!0;for(i=0,r=n;i<r.length;i++)if(u=r[i],$(t.target).closest(u).length)return!0}})}();t.preventClickingDisabledButtons=rt;k=function(n){function t(t){var i=n.call(this,t)||this;return i._closedByNavigation=!1,i._resizing=!1,i._onWindowResizeDelegate=p(i,i._onWindowResize),i}return __extends(t,n),t.beginExecuteDialogAction=function(n){w._dialogActionInProgress||(w._dialogActionInProgress=!0,n(function(){w._dialogActionInProgress=!1}))},t.create=function(n,t){var o=t&&t.content||$("<div />"),r,u,f,e;return t&&t.contentText&&o.text(t.contentText),r=i.Enhancement.enhance(n,o,t),u=this._getNextDialogZIndex(),r._element.parent().css("z-index",u),r._options.modal&&(f=r._element.parent().next("div.ui-widget-overlay").css("z-index",u-1),(a.BrowserCheckUtils.isIE()||a.BrowserCheckUtils.isEdge())&&(e=f.clone().insertAfter(f),f.css("width","50%"),e.css({"z-index":u-1,width:"50%",left:"50%"}),r._secondOverlay=e)),r._element.parent().children("div.ui-icon-gripsmall-diagonal-se").addClass("ui-icon-grip-diagonal-se"),r},t._getNextDialogZIndex=function(){var t,n,i=0;return $("div.ui-dialog").each(function(){t=Number($(this).css("z-index"));!isNaN(t)&&t>i&&(i=t)}),i<10001?n=10002:(n=i+2,n%2!=0&&n++),n},t.show=function(n,t){return this.create(n,$.extend({autoOpen:!0},t))},t.prototype.initializeOptions=function(t){var i,r,u,f;this._options=this._options||{};n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog",widthPct:.8,heightPct:.8,modal:!0,draggable:!0,resizable:!0,autoOpen:!1,dynamicSize:!0,disposeOnClose:!0,closeText:s.CloseButtonLabelText},t));i=this._options;r=$(window);i.height==="auto"&&(i.height=null);i.minWidth=Math.max(240,parseInt(i.minWidth,10)||0);i.minHeight=Math.max(192,parseInt(i.minHeight,10)||0);this._specifiedMaxWidth=parseInt(i.maxWidth,10);this._specifiedMaxHeight=parseInt(i.maxHeight,10);this._setMaxSize();this._ensureCtaButton();i.dynamicSize?(i.width=r.width()*i.widthPct,i.height=r.height()*i.heightPct):!i.useLegacyStyle&&i.height&&(u=66,i.subtitle&&(u+=22),f=typeof i.height=="number"?i.height:parseInt(i.height,10),f+=u,i.height=f);i.height&&!isNaN(i.height)&&(i.height=Math.min(i.height,r.height()));i.width&&!isNaN(i.width)&&(i.width=Math.min(i.width,r.width()));i.hideCloseButton&&(i.dialogClass=ut("no-close",i.dialogClass));this._options.useLegacyStyle&&(i.dialogClass=ut("ui-dialog-legacy",i.dialogClass))},t.prototype.initialize=function(){var t=this,s,l,c,h;n.prototype.initialize.call(this);var i=this,v=$(window),e=$.extend({},this._options);e.title=this.getTitle();e.close=function(n){t._options.close&&t._options.close(__assign({},n,{closedByNavigation:t._closedByNavigation}));t._removeSecondOverlay();t.onClose(n)};e.beforeClose=function(n){if(t._options.beforeClose)return t._options.beforeClose(__assign({},n,{closedByNavigation:t._closedByNavigation}))};e.open=function(n){i._options.open&&i._options.open.call(this,n);i.onOpen(n)};this._bind("dialogdragstart dialogdragstop",function(){u.getService().fire("dialog-move",t);t._onDialogMove()});this._options.attachResize&&this._bind("dialogresizestop",this.onDialogResize.bind(this));this._options.resizable&&(this._bind("dialogresize",this._onDialogResizing.bind(this)),this._bind("dialogresizestart",this._onDialogResizeStart.bind(this)),this._bind("dialogresizestop",this._onDialogResizeStop.bind(this)));e.dynamicSize&&(u.getService().attachEvent("window-resize",this._onWindowResizeDelegate),this._bind("dialogclose",function(){var n=u.getService();n.fire("dialog-close",i);n.detachEvent("window-resize",i._onWindowResizeDelegate)}));e.url||r.logTracePoint("Dialog.initialize.complete");rt(this.getElement(),e.buttons);this._options.contentMargin===!1&&this.getElement().addClass("no-margin");this.getElement().dialog(e);this._options.useLegacyStyle||(s=this.getElement().parent(),l=s.find(".ui-dialog-titlebar"),l.addClass("bowtie").append($("<div />").addClass("ui-dialog-subtitle")),c=$("span.ui-dialog-title",l),c.attr({role:"heading","aria-level":1}),a.tooltipIfOverflow(c[0],{titleTarget:c[0],titleText:this.getTitle()}),s.find(".ui-dialog-buttonpane").addClass("bowtie"),h=s.find("button.ui-dialog-titlebar-close"),this._closeTooltip=o.RichContentTooltip.add(this._options.closeText,h),h.removeAttr("title"),h.attr("aria-label",this._options.closeText),h.find(".ui-button-icon-primary").addClass("bowtie-icon bowtie-navigate-close"),(this._options.useBowtieStyle||this._options.bowtieVersion>0)&&s.addClass("bowtie-style"));this.setSubtitle(this.getSubtitle());this.getElement().keydown(function(n){var r,u,t;if(n.keyCode===$.ui.keyCode.ENTER){if(t=$(n.target),t.attr("role")==="combobox")return!0;if((!n.shiftKey&&t.is("input[type='text']")||t.is("textarea")&&n.ctrlKey)&&i._options.defaultButton&&i._options.buttons)return r=i._options.buttons[i._options.defaultButton],r&&(u=$("#"+r.id).button("option"),u.disabled||r.click.apply(this,[n])),!1;if(!t.is("textarea")&&!t.is("a")&&!t.is("button")&&!t.hasClass("propagate-keydown-event"))return!1}});this._options.resizable&&this._addResizeKeydownHandler();setTimeout(function(){t._autoSizeAndPosition();t.onInitialize()},0);w._dialogActionInProgress=!1;this._onHubNavigateDelegate=function(){t._closedByNavigation=!0;t.close()};u.getService().attachEvent(f.HubEventNames.PreXHRNavigate,this._onHubNavigateDelegate);a.attachResize(this.getElement(),p(this,this._onWindowResize))},t.prototype._addResizeKeydownHandler=function(){var i=this,n=this.getElement(),t=n.siblings(".ui-icon-gripsmall-diagonal-se");if(t.length>0){t.attr({tabindex:0,role:"button","aria-label":s.DialogResizeLabel});this._resizeIconTooltip=o.RichContentTooltip.add(s.DialogResizeLabel,t);t.removeAttr("title");var r=n.dialog("option","minWidth")||150,u=n.dialog("option","minHeight")||150,f=n.dialog("option","maxWidth")||Number.MAX_VALUE,e=n.dialog("option","maxHeight")||Number.MAX_VALUE;t.keydown(function(n){switch(n.keyCode){case a.KeyCode.LEFT:i._resize("width",!1,r,Math.max);h.announce(s.DialogSizeDecreased);break;case a.KeyCode.RIGHT:i._resize("width",!0,f,Math.min);h.announce(s.DialogSizeIncreased);break;case a.KeyCode.UP:i._resize("height",!1,u,Math.max);h.announce(s.DialogSizeDecreased);break;case a.KeyCode.DOWN:i._resize("height",!0,e,Math.min);h.announce(s.DialogSizeIncreased)}})}},t.prototype._resize=function(n,i,r,u){var f=this.getElement(),e=f.dialog("option",n),o;e==="auto"&&(e=f.parent().height());o=u(e+t.RESIZE_STEP*(i?1:-1),r);f.dialog("option",n,o);f.trigger("dialogresizestop",{size:{width:f.dialog("option","width"),height:f.dialog("option","height")}})},t.prototype._autoSizeAndPosition=function(){var n=this.getElement(),t=this._options;n&&n.length>0&&$.contains(document.body,n[0])&&(t.preventAutoResize||(t.position&&n.dialog("option","position",t.position),t.height?n.dialog("option","height",t.height):n.dialog("option","height","auto"),this._setMaxHeight()),n.show())},t.prototype._ensureCtaButton=function(){var n=this._options,r,u,t,i;n.noAutoCta!==!0&&(r=/(^cta$)|(^cta\ )|(\ cta\ )|( cta$)/,u=/(^warning$)|(^warning\ )|(\ warning\ )|( warning$)/,$.isArray(n.buttons)&&n.buttons.length>0&&!n.buttons.some(function(n){return r.test(n.class)})&&!n.buttons.some(function(n){return u.test(n.class)})?(i=n.buttons[0].class||"",n.buttons[0].class=i+" cta"):n.buttons&&typeof n.buttons=="object"&&(t=Object.keys(n.buttons),t.length>0&&(t.some(function(t){return r.test(n.buttons[t].class)})||t.some(function(t){return u.test(n.buttons[t].class)})||(i=n.buttons[t[0]].class||"",n.buttons[t[0]].class=i+" cta"))))},t.prototype.onLoadCompleted=function(t){n.prototype.onLoadCompleted.call(this,t);this.setInitialFocus();r.logTracePoint("Dialog.initialize.complete")},t.prototype.setInitialFocus=function(){var n=this._options.initialFocusSelector||":visible:tabbable";this.getElement().find(n).first().focus()},t.prototype.setFormFocusDelayed=function(n){c.delay(this,300,function(){n.eq(0).focus().select()})},t.prototype.setTitle=function(n){this._title=n;this._updateTitle()},t.prototype.getTitle=function(){return this._title||this._options.title||this.getElement().attr("title")||""},t.prototype.setSubtitle=function(n){this._subtitle=n;this._updateSubtitle()},t.prototype.getSubtitle=function(){var n=this._subtitle;return(n===null||n===undefined)&&(n=this._options.subtitle),n||""},t.prototype.centerDialog=function(){this.getElement().dialog("option","position",{my:"center",at:"center",of:window});this._setMaxHeight()},t.prototype.getDialogResult=function(){return this._dialogResult},t.prototype.setDialogResult=function(n){this._dialogResult=n},t.prototype.show=function(){this.getElement().dialog("open")},t.prototype.onOpen=function(){if(!this._options||this._options.hasProgressElement!==!1){var n=$("<div />").addClass("ui-dialog-titlebar-progress-container").appendTo(this.getElement().parent().find(".ui-dialog-titlebar"));this._progressElement=$("<div />").addClass("ui-dialog-titlebar-progress-element").appendTo(n);v.globalProgressIndicator.registerProgressElement(this._progressElement)}u.getService().fire("dialog-open",this)},t.prototype.onClose=function(){u.getService().fire("dialog-close",this);this._progressElement&&v.globalProgressIndicator.unRegisterProgressElement(this._progressElement);this._removeSecondOverlay();this._options.disposeOnClose&&this.dispose();var n=$(".ui-dialog").slice(-1);n.length&&!this._options.noFocusOnClose&&n.focus()},t.prototype.onInitialize=function(){typeof this._options.initialize=="function"&&this._options.initialize.call(this)},t.prototype.close=function(){this.getElement()&&this.getElement().dialog("close")},t.prototype.dispose=function(){this._removeSecondOverlay();u.getService().detachEvent(f.HubEventNames.PreXHRNavigate,this._onHubNavigateDelegate);a.detachResize(this.getElement());this._closeTooltip&&(this._closeTooltip.dispose(),this._closeTooltip=null);this._resizeIconTooltip&&(this._resizeIconTooltip.dispose(),this._resizeIconTooltip=null);n.prototype.dispose.call(this)},t.prototype._removeSecondOverlay=function(){this._secondOverlay&&(this._secondOverlay.remove(),this._secondOverlay=null)},t.prototype._updateSubtitle=function(){if(this._initialized&&this.getElement()){var n=this.getElement().parent().find(".ui-dialog-subtitle"),t=this.getSubtitle()||"";n.text(t);a.tooltipIfOverflow(n[0],{titleTarget:n[0],titleText:t});n.toggle(t.length>0)}},t.prototype.onDialogResize=function(){},t.prototype._updateTitle=function(){if(this._initialized&&this.getElement()){var t=this.getElement().dialog("option","title",this.getTitle()),n=$("span.ui-dialog-title",t.parent());a.tooltipIfOverflow(n[0],{titleTarget:n[0],titleText:this.getTitle()})}},t.prototype._onWindowResize=function(){if(!this._resizing){var t=$(window),n=this._options;n.dynamicSize&&(this._setMaxSize(),this.getElement().dialog("option",{width:t.width()*n.widthPct,height:t.height()*n.heightPct,maxHeight:parseInt(this._options.maxHeight,10),maxWidth:parseInt(this._options.maxWidth,10)}));this.getElement().dialog("option","position",{my:"center",at:"center",of:window})}},t.prototype._onDialogResizing=function(n,t){var u=$(window),i,r;t&&t.position&&t.size&&(i=Math.min(t.size.height,u.height()-t.position.top),r=Math.min(t.size.width,u.width()-t.position.left),(i!==t.size.height||r!==t.size.width)&&this.getElement().dialog("option",{width:r,height:i}))},t.prototype._onDialogMove=function(){this._options.preventAutoResize||(this._setMaxHeight(),this._ensureDialogContentHeight());this._hideCloseButtonTooltip();this._hideResizeIconTooltip()},t.prototype._onDialogResizeStart=function(){this._resizing=!0;this._hideCloseButtonTooltip();this._hideResizeIconTooltip()},t.prototype._onDialogResizeStop=function(){this._resizing=!1},t.prototype._ensureDialogContentHeight=function(){var n=this.getElement().parent().css("height");n!=="auto"?this.getElement().css("height",this.getElement().outerHeight()):this.getElement().css("height","auto")},t.prototype._setMaxHeight=function(){var n=this.getElement().prev().outerHeight(!0)+this.getElement().next().outerHeight(!0);this.getElement().css("maxHeight",window.innerHeight-this.getElement().parent().position().top-n)},t.prototype._setMaxSize=function(){this._options.maxWidth=Math.min(window.innerWidth,this._specifiedMaxWidth||Infinity);this._options.maxHeight=Math.min(window.innerHeight,this._specifiedMaxHeight||Infinity)},t.prototype._hideCloseButtonTooltip=function(){this._closeTooltip&&this._closeTooltip.hide()},t.prototype._hideResizeIconTooltip=function(){this._resizeIconTooltip&&this._resizeIconTooltip.hide()},t.enhancementTypeName="tfs.dialog",t._dialogActionInProgress=!1,t.RESIZE_STEP=25,t}(e.AjaxPanelO);t.DialogO=k;w=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(k);t.Dialog=w;d=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog modal-dialog",modal:!0,dynamicSize:!1,width:500,height:"auto",defaultButton:"ok",buttons:{ok:{id:"ok",text:t&&t.okText||s.ModalDialogOkButton,click:p(this,this.onOkClick),"class":"cta",disabled:"disabled"},cancel:{id:"cancel",text:t&&t.cancelText||s.ModalDialogCancelButton,click:p(this,this.onCancelClick)}}},t))},t.prototype.initialize=function(){this._bind(g.EVENT_BUTTON_STATUS_CHANGE,p(this,this.onButtonStatusChange));this._bind("resultReady",p(this,this.onResultReady));n.prototype.initialize.call(this)},t.prototype.updateOkButton=function(n){this.getElement()&&this.getElement().trigger(g.EVENT_BUTTON_STATUS_CHANGE,{enabled:n===!0})},t.prototype.processResult=function(n){var t=this._options.okCallback;n&&($.isFunction(t)&&(t.call(this,n),r.logTracePoint(this.getTypeName()+".callback-complete")),this.close())},t.prototype.onOkClick=function(){r.logTracePoint(this.getTypeName()+".OkClicked");this.processResult(this.getDialogResult())},t.prototype.onResultReady=function(n,t){this.processResult(t)},t.prototype.onCancelClick=function(){$.isFunction(this._options.cancelCallback)&&this._options.cancelCallback();this.close()},t.prototype.onButtonStatusChange=function(n,t){var i=this.getElement().siblings(".ui-dialog-buttonpane").find("#"+(t.button||"ok"));i.button("option","disabled",t.enabled?"":"disabled");this.setAttribute("aria-disabled",t.enabled?"false":"true",i)},t.enhancementTypeName="tfs.modaldialog",t.EVENT_BUTTON_STATUS_CHANGE="buttonStatusChange",t}(k);t.ModalDialogO=d;g=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(d);t.ModalDialog=g;nt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:400,height:200,resizable:!1,cssClass:"confirmation-dialog"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.$errorContainer=$(it("div")).addClass("confirmation-dialog-error").prependTo(this.getElement()).hide();this.updateOkButton(!0)},t.prototype._onSuccess=function(){this._fire("resultReady",!0);var n=this._options.successCallback;$.isFunction(n)&&(n.apply(this,arguments),r.logTracePoint(this.getTypeName()+".callback-complete"))},t.prototype._onError=function(n){this.$errorContainer.text(n.message).show()},t.prototype.onOkClick=function(t){this.updateOkButton(!1);n.prototype.onOkClick.call(this,t)},t}(d);t.ConfirmationDialogO=nt;ft=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(nt);t.ConfirmationDialog=ft;et=function(){function n(n){this.button=n}return n.prototype.toString=function(){return"MessageDialogResult: Button: "+(this.button?this.button.id:"?")+" ("+v.ErrorHandler.ignoreRejectedPromiseTag+")"},n}();tt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){var u=this,i=$.extend({width:500,height:"auto",hideCloseButton:!0,coreCssClass:"dialog modal-dialog message-dialog",modal:!0,dynamicSize:!1},t),r;i.buttons instanceof Array&&i.buttons.length>0&&(r={},i.buttons.forEach(function(n){r[n.id]=u.getButtonOptions(n)}),t.noDefaultButton||(i.defaultButton=i.buttons[0].id),this.setDialogResult(i.buttons[i.buttons.length-1]),i.buttons=r);t.escapeButton&&this.setDialogResult(t.escapeButton);n.prototype.initializeOptions.call(this,i)},t.prototype.initialize=function(){var i,t;n.prototype.initialize.call(this);this._options.requiredTypedConfirmation&&this.initializeTypedConfirmation();for(i in this._options.buttons)t=this._options.buttons[i],t.style&&$("#"+t.id).addClass(t.style)},t.prototype.initializeTypedConfirmation=function(){var u=this,f=this.getElement(),n=$("<input type='text' class='textbox message-dialog-confirm-textbox no-match' />"),t=$(),i,r;for(i in this._options.buttons)this._options.buttons[i].reject||(t=t.add($("#"+this._options.buttons[i].id)));r=function(){l.ignoreCaseComparer(n.val(),u._options.requiredTypedConfirmation)==0?(n.removeClass("no-match").addClass("match"),t.button("option","disabled","")):(n.addClass("no-match").removeClass("match"),t.button("option","disabled","disabled"))};n.bind("input keyup",r);f.append($("<div class='message-dialog-confirm'><\/div>").append(n));r(null);c.delay(this,100,function(){n.focus();n.select()})},t.prototype.getPromise=function(){return this._deferred||(this._deferred=y.defer()),this._deferred.promise},t.showMessageDialog=function(n,t){var i,r;return t=t||{},i=$.extend({buttons:[b.buttons.ok,b.buttons.cancel],useBowtieStyle:!0,minWidth:t.width,minHeight:t.height,title:s.Confirm},t),i.content=typeof n=="string"?$("<div />").text(n):n,r=st(b,i),r.getPromise()},t.prototype.onClose=function(t){if(this._deferred){var i=new et(this.getDialogResult());this._options.beforeClose&&this._options.beforeClose(i.button);i.button.reject?this._deferred.reject(i):this._deferred.resolve(i)}return n.prototype.onClose.call(this,t)},t.prototype.getButtonOptions=function(n){var t=this;return $.extend({click:function(){t.setDialogResult(n);t.close()}},n)},t.buttons={ok:{id:"ok",text:s.ModalDialogOkButton,reject:!1},cancel:{id:"cancel",text:s.ModalDialogCancelButton,reject:!0},yes:{id:"yes",text:s.ModalDialogYesButton,reject:!1},no:{id:"no",text:s.ModalDialogNoButton,reject:!0},close:{id:"close",text:s.CloseButtonLabelText,reject:!0}},t}(k);t.MessageDialogO=tt;b=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(tt);t.MessageDialog=b;ot=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:t.width||600,minWidth:400,height:t.height||450,minHeight:200,attachResize:!0,defaultButton:"close",buttons:[{id:"close",text:s.CloseButtonLabelText,click:p(this,this.close)}]},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.setTitle(s.CopyContentDialogTitle);this._decorate()},t.prototype._decorate=function(){var r=this.getElement(),n,i=$("<div>").text(this._options.dialogLabel||this._getDefaultLabelText()),t;this._options.dialogLabelExtend&&i.append(this._options.dialogLabelExtend);t=$("<div class='copy-dialog-container'>").append(i).append($("<p>"));this._options.excludeTextPanel||(n=$("<div>"),t.append(n),this._options.copyAsHtml?this._initializeRichEditor(n):(this._initializeTextPanel(n),c.delay(this,100,function(){this._$textArea.focus();this._$textArea.select()})),this._bind("dialogresize",function(){n.css("height",t.height()-i.height()-40+"px")}));r.append(t);this._options.excludeTextPanel||n.css("height",t.height()-i.height()-40+"px")},t.prototype._getDefaultLabelText=function(){return a.BrowserCheckUtils.isMacintosh()?s.CopyContentMacintoshHelpText:s.CopyContentPcHelpText},t.prototype._initializeRichEditor=function(n){var t=this;v.using(["VSS/Controls/RichEditor"],function(r){var u=i.BaseControl.createIn(r.RichEditor,n,{noToolbar:!0,height:"100%",pageHtml:t._options.pageHtml,internal:!0});u.ready(function(){u.setValue(t._options.data);u.bindOnCopy(p(t,function(){c.delay(this,0,function(){this.close()})}));c.delay(t,100,function(){u.selectText();u.setEnabled(!1)})})})},t.prototype._initializeTextPanel=function(n){var t="copy-content-textarea";this._options.textAreaCopyClass&&(t=this._options.textAreaCopyClass);this._$textArea=$("<textarea/>").addClass(t).text(this._options.data);this._options.disableEdit&&this._$textArea.attr("readonly","readonly");this._$textArea[0].oncopy=p(this,function(){c.delay(this,0,function(){this.close()})});n.append(this._$textArea)},t.enhancementTypeName="CopyContentDialog",t}(d);t.CopyContentDialog=ot;t.show=st;t.showMessageDialog=ht;t.showConfirmNavigationDialog=ct});

define("Mention/Scripts/Resources/TFS.Resources.Mention",["require","exports"],function(require,exports){var e=exports;e.PullRequestText="Pull Request {0}";e.MentionPR="Mention a pull request";e.AutocompleteSearchButtonText="Search";e.WorkItemMentionOptionSelected="{0}. Selected";e.AutocompleteServerError="Error loading suggestions";e.DiscussionMentionWorkItemTip="workitems (#)";e.AutocompleteSuggestionsPlural="Showing {0} suggestions";e.AutocompleteSuggestionsSingular="Showing 1 suggestion";e.AutocompleteTermsOverLimit="Search only supports up to {0} keywords. Refine your criteria.";e.MentionMaterializeErrorDialogTitle="Error";e.AutocompleteNoSuggestions="No suggestions found";e.MentionWorkItem="Mention a work item";e.DiscussionShowMoreRetrievalError="Unable to show more comments";e.GitPullRequestMentionWorkItemDiscussionMessageFormat="Mentioned in {0}";e.AutocompleteLoading="Loading suggestions";e.DiscussionStateTextFormat="({0} of {1})";e.DiscussionMentionPersonTip="people (@)";e.DiscussionUserCommentedTextFormat="commented {0}";e.MentionSomeone="Mention someone";e.DiscussionShowMoreLinkText="Show more";e.MentionMaterializeIdentityFailError="The identity \u003cspan class=\u0027{0}\u0027\u003e@{1}\u003c/span\u003e could not be added to VSTS and will not receive the e-mail notification.\u003cbr\u003ePlease remove the user and retry the mention.";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Identities/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.None=0]="None";n[n.ServiceIdentity=1]="ServiceIdentity";n[n.AggregateIdentity=2]="AggregateIdentity";n[n.ImportedIdentity=3]="ImportedIdentity"}(i=t.FrameworkIdentityType||(t.FrameworkIdentityType={})),function(n){n[n.Generic=0]="Generic";n[n.ServiceHost=1]="ServiceHost";n[n.TeamProject=2]="TeamProject"}(r=t.GroupScopeType||(t.GroupScopeType={})),function(n){n[n.None=0]="None";n[n.Direct=1]="Direct";n[n.Expanded=2]="Expanded";n[n.ExpandedUp=3]="ExpandedUp";n[n.ExpandedDown=4]="ExpandedDown"}(u=t.QueryMembership||(t.QueryMembership={})),function(n){n[n.None=0]="None";n[n.FilterIllegalMemberships=1]="FilterIllegalMemberships"}(f=t.ReadIdentitiesOptions||(t.ReadIdentitiesOptions={}));t.TypeInfo={CreateScopeInfo:{},FrameworkIdentityInfo:{},FrameworkIdentityType:{enumValues:{none:0,serviceIdentity:1,aggregateIdentity:2,importedIdentity:3}},GroupScopeType:{enumValues:{generic:0,serviceHost:1,teamProject:2}},IdentityBatchInfo:{},IdentityScope:{},IdentitySnapshot:{},QueryMembership:{enumValues:{none:0,direct:1,expanded:2,expandedUp:3,expandedDown:4}},ReadIdentitiesOptions:{enumValues:{none:0,filterIllegalMemberships:1}}};t.TypeInfo.CreateScopeInfo.fields={scopeType:{enumType:t.TypeInfo.GroupScopeType}};t.TypeInfo.FrameworkIdentityInfo.fields={identityType:{enumType:t.TypeInfo.FrameworkIdentityType}};t.TypeInfo.IdentityBatchInfo.fields={queryMembership:{enumType:t.TypeInfo.QueryMembership}};t.TypeInfo.IdentityScope.fields={scopeType:{enumType:t.TypeInfo.GroupScopeType}};t.TypeInfo.IdentitySnapshot.fields={scopes:{isArray:!0,typeInfo:t.TypeInfo.IdentityScope}}});

define("VSS/Graph/Contracts",["require","exports","VSS/Identities/Contracts"],function(n,t,i){"use strict";var r,u,f;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.PrincipalName=0]="PrincipalName";n[n.DisplayName=1]="DisplayName";n[n.AdministratorsGroup=2]="AdministratorsGroup";n[n.Identifier=3]="Identifier";n[n.MailAddress=4]="MailAddress";n[n.General=5]="General";n[n.Alias=6]="Alias";n[n.DirectoryAlias=8]="DirectoryAlias"}(r=t.GraphMemberSearchFactor||(t.GraphMemberSearchFactor={})),function(n){n[n.Unknown=0]="Unknown";n[n.Down=1]="Down";n[n.Up=2]="Up"}(u=t.GraphTraversalDirection||(t.GraphTraversalDirection={})),function(n){n[n.Undefined=0]="Undefined";n[n.Enabled=1]="Enabled";n[n.Disabled=2]="Disabled"}(f=t.IdentityShardingState||(t.IdentityShardingState={}));t.TypeInfo={GraphMemberSearchFactor:{enumValues:{principalName:0,displayName:1,administratorsGroup:2,identifier:3,mailAddress:4,general:5,alias:6,directoryAlias:8}},GraphScope:{},GraphScopeCreationContext:{},GraphTraversalDirection:{enumValues:{unknown:0,down:1,up:2}},GraphUser:{},IdentityShardingState:{enumValues:{undefined:0,enabled:1,disabled:2}},PagedGraphUsers:{}};t.TypeInfo.GraphScope.fields={scopeType:{enumType:i.TypeInfo.GroupScopeType}};t.TypeInfo.GraphScopeCreationContext.fields={scopeType:{enumType:i.TypeInfo.GroupScopeType}};t.TypeInfo.GraphUser.fields={metadataUpdateDate:{isDate:!0}};t.TypeInfo.PagedGraphUsers.fields={graphUsers:{isArray:!0,typeInfo:t.TypeInfo.GraphUser}}});

define("VSS/Graph/RestClient",["require","exports","VSS/Graph/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function p(n){return window.VSS&&window.VSS.VssSDKRestVersion&&v[window.VSS.VssSDKRestVersion]?r.getClient(v[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(h,undefined,undefined,undefined,n)}var e,o,f,s,h,c,l,a,y,v;Object.defineProperty(t,"__esModule",{value:!0});e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getDescriptor=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"048aee0a-7072-4cde-ab73-7af77b1e0b4e",resource:"Descriptors",routeTemplate:"_apis/{area}/{resource}/{storageKey}",routeValues:{storageKey:n},apiVersion:this.descriptorsApiVersion})},t}(u.VssHttpClient);t.CommonMethods3_1To5=e;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.listUsers=function(n,t){var r={subjectTypes:n&&n.join(","),continuationToken:t};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,responseIsCollection:!0,queryParams:r,apiVersion:this.usersApiVersion},!0).then(function(n){var t=n[0],r=n[1],i=n[2];return{graphUsers:t,continuationToken:[i.getResponseHeader("X-MS-ContinuationToken")]}})},t.prototype.getUser=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,routeValues:{userDescriptor:n},apiVersion:this.usersApiVersion})},t.prototype.getCuidBasedUserByLegacyDescriptor=function(n){var t={cuidBasedUserLegacyDescriptor:n};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,queryParams:t,apiVersion:this.usersApiVersion})},t.prototype.findUsersBySearchFactor=function(n,t,r){var u={searchFactor:n,searchValue:t,forceDomainQualification:r};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,responseIsCollection:!0,queryParams:u,apiVersion:this.usersApiVersion})},t.prototype.deleteUser=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",routeValues:{userDescriptor:n},apiVersion:this.usersApiVersion})},t.prototype.createUser=function(n,t){var r={groupDescriptors:t&&t.join(",")};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,queryParams:r,apiVersion:this.usersApiVersion,data:n})},t.prototype.getSubject=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1d44a2ac-4f8a-459e-83c2-1c92626fb9c6",resource:"Subjects",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.subjectsApiVersion})},t.prototype.lookupSubjects=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"4dd4d168-11f2-48c4-83e8-756fa0de027c",resource:"SubjectLookup",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.subjectLookupApiVersion,data:n})},t.prototype.getStorageKey=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"eb85f8cc-f0f6-4264-a5b1-ffe2e4d4801f",resource:"StorageKeys",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.storageKeysApiVersion})},t.prototype.getIdentityShardingState=function(){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"706e2a05-eb8a-4417-b599-2713b5b3e0a6",resource:"ShardingState",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.IdentityShardingState,apiVersion:this.shardingStateApiVersion})},t.prototype.updateScope=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",routeValues:{scopeDescriptor:n},customHeaders:{"Content-Type":"application/json-patch+json"},apiVersion:this.scopesApiVersion,data:t})},t.prototype.getScope=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",responseType:i.TypeInfo.GraphScope,routeValues:{scopeDescriptor:n},apiVersion:this.scopesApiVersion})},t.prototype.deleteScope=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",routeValues:{scopeDescriptor:n},apiVersion:this.scopesApiVersion})},t.prototype.createScope=function(n,t){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",requestType:i.TypeInfo.GraphScopeCreationContext,responseType:i.TypeInfo.GraphScope,routeValues:{scopeDescriptor:t},apiVersion:this.scopesApiVersion,data:n})},t.prototype.traverseMemberships=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"5d59d874-746f-4f9b-9459-0e571f1ded8c",resource:"MembershipTraversals",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.membershipTraversalsApiVersion})},t.prototype.lookupMembershipTraversals=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"5d59d874-746f-4f9b-9459-0e571f1ded8c",resource:"MembershipTraversals",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",responseIsCollection:!0,queryParams:r,apiVersion:this.membershipTraversalsApiVersion,data:n})},t.prototype.getMembershipState=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1ffe5c94-1144-4191-907b-d0211cad36a8",resource:"MembershipStates",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.membershipStatesApiVersion})},t.prototype.listMemberships=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"e34b6394-6b30-4435-94a9-409a5eef3e31",resource:"MembershipsBatch",routeTemplate:"_apis/{area}/Memberships/{subjectDescriptor}",responseIsCollection:!0,routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.membershipsBatchApiVersion})},t.prototype.removeMembership=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.getMembership=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.checkMembershipExistence=function(n,t){return this._beginRequest({httpMethod:"HEAD",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion}).then(function(){return!0},function(n){if(n.status===404)return!1;throw n;})},t.prototype.addMembership=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.getMemberByDescriptor=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"b9af63a7-5db6-4af8-aae7-387f775ea9c6",resource:"Members",routeTemplate:"_apis/{area}/{resource}/{memberDescriptor}",routeValues:{memberDescriptor:n},apiVersion:this.membersApiVersion})},t.prototype.getMemberByCuid=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"42939f1e-03ad-4ae9-9013-40f717a49d89",resource:"Members",routeTemplate:"_apis/{area}/{resource}/{memberCuid}",routeValues:{memberCuid:n},apiVersion:this.membersApiVersion_42939f1e})},t.prototype.findMembersBySearchFactor=function(n,t,i){var r={searchFactor:n,searchValue:t,forceDomainQualification:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"8b9ecdb2-b752-485a-8418-cc15cf12ee07",resource:"Members",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,queryParams:r,apiVersion:this.membersApiVersion_8b9ecdb2})},t.prototype.lookupMembers=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"3d74d524-ae3d-4d24-a9a7-f8a5cf82347a",resource:"MemberLookup",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.memberLookupApiVersion,data:n})},t.prototype.updateGroup=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},customHeaders:{"Content-Type":"application/json-patch+json"},apiVersion:this.groupsApiVersion,data:t})},t.prototype.listGroups=function(n,t,i){var r={scopeDescriptor:n,subjectTypes:t&&t.join(","),continuationToken:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",responseIsCollection:!0,queryParams:r,apiVersion:this.groupsApiVersion},!0).then(function(n){var t=n[0],r=n[1],i=n[2];return{graphGroups:t,continuationToken:[i.getResponseHeader("X-MS-ContinuationToken")]}})},t.prototype.getGroup=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},apiVersion:this.groupsApiVersion})},t.prototype.findGroupsBySearchFactor=function(n,t,i){var r={searchFactor:n,searchValue:t,forceDomainQualification:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",responseIsCollection:!0,queryParams:r,apiVersion:this.groupsApiVersion})},t.prototype.deleteGroup=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},apiVersion:this.groupsApiVersion})},t.prototype.createGroup=function(n,t,i){var r={scopeDescriptor:t,groupDescriptors:i&&i.join(",")};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",queryParams:r,apiVersion:this.groupsApiVersion,data:n})},t.prototype.writeGlobalExtendedProperties=function(n){return this._beginRequest({httpMethod:"PUT",httpResponseType:"html",area:"Graph",locationId:"de5a3b9c-0d60-455a-b405-4bb8f0954d3c",resource:"GraphGlobalExtendedPropertyBatch",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.graphGlobalExtendedPropertyBatchApiVersion,data:n})},t.prototype.getGlobalExtendedProperties=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"de5a3b9c-0d60-455a-b405-4bb8f0954d3c",resource:"GraphGlobalExtendedPropertyBatch",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.graphGlobalExtendedPropertyBatchApiVersion,data:n})},t.prototype.getCachePolicies=function(){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"beb83272-b415-48e8-ac1e-a9b805760739",resource:"CachePolicies",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.cachePoliciesApiVersion})},t}(e);t.CommonMethods3_2To5=o;f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getProviderInfo=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1e377995-6fa2-4588-bd64-930186abdcfa",resource:"ProviderInfo",routeTemplate:"_apis/{area}/Users/{userDescriptor}/{resource}",routeValues:{userDescriptor:n},apiVersion:this.providerInfoApiVersion})},t}(o);t.CommonMethods4To5=f;s=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.cachePoliciesApiVersion=r.descriptorsApiVersion=r.graphGlobalExtendedPropertyBatchApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membersApiVersion_42939f1e=r.membersApiVersion_8b9ecdb2=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.providerInfoApiVersion=r.scopesApiVersion=r.shardingStateApiVersion=r.storageKeysApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="5.0-preview.1",r}return __extends(t,n),t.prototype.getFederatedProviderData=function(n,t,i){var r={providerName:t,versionHint:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"5dcd28d6-632d-477f-ac6b-398ea9fc2f71",resource:"FederatedProviderData",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:"5.0-preview.1"})},t}(f);t.GraphHttpClient5=s;h=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.cachePoliciesApiVersion=r.descriptorsApiVersion=r.graphGlobalExtendedPropertyBatchApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membersApiVersion_42939f1e=r.membersApiVersion_8b9ecdb2=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.providerInfoApiVersion=r.scopesApiVersion=r.shardingStateApiVersion=r.storageKeysApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="4.1-preview.1",r}return __extends(t,n),t}(f);t.GraphHttpClient4_1=h;c=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.cachePoliciesApiVersion=r.descriptorsApiVersion=r.graphGlobalExtendedPropertyBatchApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membersApiVersion_42939f1e=r.membersApiVersion_8b9ecdb2=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.providerInfoApiVersion=r.scopesApiVersion=r.shardingStateApiVersion=r.storageKeysApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="4.0-preview.1",r}return __extends(t,n),t}(f);t.GraphHttpClient4=c;l=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.cachePoliciesApiVersion=r.descriptorsApiVersion=r.graphGlobalExtendedPropertyBatchApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membersApiVersion_42939f1e=r.membersApiVersion_8b9ecdb2=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.shardingStateApiVersion=r.storageKeysApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="3.2-preview.1",r}return __extends(t,n),t}(o);t.GraphHttpClient3_2=l;a=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.descriptorsApiVersion="3.1-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient3_1=a;y=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(s);t.GraphHttpClient=y;v={"5.0":s,"4.1":h,"4.0":c,"3.2":l,"3.1":a};t.getClient=p});

define("Mention/Scripts/TFS.Mention.People",["require","exports","q","VSS/Diag","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Social.Telemetry","Presentation/Scripts/URI","VSS/Utils/UI","VSS/Context","VSS/Controls","VSS/Controls/Dialogs","VSS/Identities/Picker/Controls","VSS/Identities/Picker/Services","VSS/Service","VSS/Utils/UI","VSS/Utils/String","Mention/Scripts/Resources/TFS.Resources.Mention","VSS/Events/Services","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/WebApi/Constants","VSS/WebApi/Constants","VSS/Graph/RestClient"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){function vt(n){var t=ft.getIdentityAttribute(n);return ft.useStorageKeysInMentions()?u.createHtmlMention("#","@"+n.displayName,t,"2.0"):u.createHtmlMention(""+u.Constants.HTML_MENTION_LEGACY_FORMAT_HREF+ft.getIdentityId(n),"@"+n.displayName,t)}function bt(){return ot.getDefault()}var st,wt,ft,yt,ct,lt,ht,pt,ot,at,et;Object.defineProperty(t,"__esModule",{value:!0});st={Source:!0,IMS:!0},function(n){n[n.Everyone=0]="Everyone"}(wt=t.PeopleGroup||(t.PeopleGroup={}));ft=function(){function n(){}return n.regexMention=function(){return n.REGEX_MENTION_USERS_AND_MATERIALIZEDGROUPS},n.metadataContainsValidVersion=function(n){return w.startsWith(n,u.Constants.HTML_MENTION_VERSION_10)||w.startsWith(n,u.Constants.HTML_MENTION_VERSION_20)},n.matchAndRemoveWordStartSeparator=function(n,t){var i=n.exec(t),u,r;return i?(u=i[1]&&i[1].length?i[1].length:0,r=[i[0].substring(u)],r=r.concat(i.slice(2)),r.index=i.index+u,r.input=i.input,r):null},n.getMentionTrigger=function(t,i){var u,e=0,f,o,r;for(n.REGEX_NAME_TRIGGER_HEAD.lastIndex=0;u=n.REGEX_NAME_TRIGGER_HEAD.exec(t);)e=u.index;return(i?(n.REGEX_NAME_TRIGGER_WHEN_OPEN.lastIndex=e,u=n.matchAndRemoveWordStartSeparator(n.REGEX_NAME_TRIGGER_WHEN_OPEN,t)):(n.REGEX_NAME_TRIGGER_WHEN_CLOSED.lastIndex=e,u=n.matchAndRemoveWordStartSeparator(n.REGEX_NAME_TRIGGER_WHEN_CLOSED,t)),u&&(n.regexMention().lastIndex=0,f=n.regexMention().exec(u[0]),o=f&&f.index===0&&f[0].length<u[0].length,!o))?(r=u[1]||"",n.REGEX_CONSECUTIVE_WHITESPACES.exec(r))?null:(r.indexOf("<")===0&&(r=r.substring(1)),r.indexOf(">")===r.length-1&&(r=r.substring(0,r.length-1)),{prefix:r,index:u.index,match:u[0]}):null},n.useNotificationsPipeline=function(){return nt.FeatureAvailabilityService.isFeatureEnabled(tt.FeatureAvailabilityFlags.UseNotificationPipelineForMentions)&&nt.FeatureAvailabilityService.isFeatureEnabled(tt.FeatureAvailabilityFlags.AllowGroupMentions)},n.useStorageKeysInMentions=function(){return nt.FeatureAvailabilityService.isFeatureEnabled(tt.FeatureAvailabilityFlags.UseStorageKeyInMentions)},n.getSupportedEntityTypes=function(){return{User:!0,Group:n.useNotificationsPipeline()}},n.getIdentityId=function(t){return h.getPageContext().webAccessConfiguration.isHosted?n.useStorageKeysInMentions()?t.displayName:t.signInAddress!=null?t.signInAddress:t.displayName:t.entityType===it.DirectoryEntityType.Group?"["+t.scopeName+"]\\"+t.samAccountName:t.scopeName+"\\"+t.samAccountName},n.getMetadataFromTextMention=function(n){if(n){var t=n.lastIndexOf("]"),i=n.lastIndexOf(" [",t);if(i>=0&&t>i)return n.substring(i+2,t)}return null},n.getVsidFromMetadata=function(t){var i,r;return!t||!n.metadataContainsValidVersion(t)?null:(i=n.getDataFromMetadata(t,u.Constants.HTML_MENTION_ID_ATTR),i||(r=t.split(","),r.length===2&&(i=r[1])),i&&w.isGuid(i))?i:null},n.getDataFromMetadata=function(n,t){var e,r,f,i;if(!n||!t)return null;for(e=n.split(","),t=t+u.Constants.METADATA_ATTR_SEPARATOR,r=0,f=e;r<f.length;r++)if(i=f[r],i=i.trim(),i.indexOf(t)===0)return i.substr(t.length);return null},n.formatUniqueId=function(t){return!t||t.length===0?"":n.formatIdentifier(u.Constants.HTML_MENTION_ID_ATTR_PREFIX+t)},n.formatIdentityAttribute=function(t){var i=n.getIdentityAttribute(t);return i&&t.entityType===it.DirectoryEntityType.Group?n.formatIdentifier(i):""},n.getIdentityAttribute=function(t){var i;return n.useStorageKeysInMentions()?t&&(i=t.localId):t&&t.entityType===it.DirectoryEntityType.Group&&t.localId&&(i=u.Constants.HTML_MENTION_ID_ATTR_PREFIX+t.localId),i},n.formatIdentifier=function(n){return"["+n+"]"},n.PersonArtifactType="Person",n.PATTERN_WORD_START_SEPARATOR="(?:^|[\\s\\(])",n.PATTERN_WORD_END_SEPARATOR="(?:$|[\\s\\)])",n.PATTERN_NAME_ONE_WORD="[^\\s]+",n.PATTERN_NAME_MULTI_WORD=n.PATTERN_NAME_ONE_WORD+"(\\s+[^\\s]*){0,4}",n.REGEX_NAME_TRIGGER_HEAD=new RegExp("("+n.PATTERN_WORD_START_SEPARATOR+")@","g"),n.REGEX_NAME_TRIGGER_WHEN_OPEN=new RegExp("("+n.PATTERN_WORD_START_SEPARATOR+")@("+n.PATTERN_NAME_MULTI_WORD+")?$","g"),n.REGEX_NAME_TRIGGER_WHEN_CLOSED=new RegExp("("+n.PATTERN_WORD_START_SEPARATOR+")@("+n.PATTERN_NAME_ONE_WORD+")?$","g"),n.REGEX_MENTION_USERS_AND_MATERIALIZEDGROUPS=new RegExp("@<(\\S{1,256}?)>|@<(.{1,256}? \\[id:[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\\])>|@<(.{1,256}?)>|@<([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})>","g"),n.REGEX_PERSON_MENTION_IN_WORKITEM_DISC=new RegExp(u.Constants.HTML_MENTION_VERSION_20+",[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","i"),n.REGEX_CONSECUTIVE_WHITESPACES=/\s\s/,n}();t.Helpers=ft;yt=function(){function n(n){var t=this;this._updateActiveDescendantHandler=function(n){var i=t._getMentionTextArea();i&&n&&n.uniqueId===t._identityPickerDropdownId&&d.delay(t,0,function(){i.attr("aria-activedescendant",n.activeDescendantId)})};this._options=n||{}}return n.prototype.initialize=function(){var n=this,t;this._identityPickerDropdownId=g.GUIDUtils.newGuid();t={operationScope:st,identityType:ft.getSupportedEntityTypes(),onItemSelect:f.delegate(this,function(t){n._selectIdentity({},t)}),onHide:function(t){t||(t=$.Event("identityPickerHide"));n._inputText&&n._inputText.textBeforeSelection!=="@"&&!/\s@$/.test(n._inputText.textBeforeSelection)&&n.close(t,n._inputText)},showMru:!0,showContactCard:ft.useStorageKeysInMentions(),useRemainingSpace:this._options.useRemainingSpace,alignment:{positioningElement:this._options.positioningElement},consumerId:u.Constants.IDENTITY_PICKER_CONSUMER_ID,eventOptions:{uniqueId:this._identityPickerDropdownId},preDropdownRender:function(t){return ft.useStorageKeysInMentions()?t:n.filterEntities(t)}};this._identityPickerDropdown=c.create(a.IdentityPickerDropdownControl,this._getMenuContainer(),t);this._identityPickerDropdown.hide()},n.prototype.filterEntities=function(n){return n&&n.length>0?n.filter(function(n){return n.localId!==null||n.entityType!==it.DirectoryEntityType.Group}):n},n.prototype.getPluginName=function(){return"PersonAutocompleteProvider"},n.prototype.canOpen=function(n){var t=ft.getMentionTrigger(n.textBeforeSelection,this._isOpen);return!t?null:{start:t.index,end:n.textBeforeSelection.length}},n.prototype.open=function(n,t){var i,r;this._inputText=t;this._isOpen=!0;i=this._getMentionTextArea();i&&(r=i.length&&i[0].tagName==="DIV",i.attr({"aria-owns":this._identityPickerDropdown.getId(),"aria-expanded":r?null:"true","aria-autocomplete":"list"}),k.getService().attachEvent(a.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantHandler))},n.prototype.suggest=function(n,t){var i=this,r=$.Deferred(),o=(new Date).getTime();this._inputText=t;var u=ft.getMentionTrigger(t.textBeforeSelection,!0),e=function(n){i._isOpen!==i._identityPickerDropdown.isVisible()&&(i._isOpen?i._identityPickerDropdown.show():i._identityPickerDropdown.hide());r.resolve({result:void 0,telemetry:{suggestionsCount:""+n.length,durationInMSec:""+((new Date).getTime()-o)}})},s=function(n){r.reject(n)};return u.prefix?this._identityPickerDropdown.getIdentities(u.prefix).then(f.delegate(this,e),f.delegate(this,s)):this._identityPickerDropdown.showAllMruIdentities().then(f.delegate(this,e)),r},n.prototype.close=function(n,t){var i,r;this._isOpen&&(this._inputText=t,this._isOpen=!1,this._identityPickerDropdown.hide(),i=this._getMentionTextArea(),i&&(r=i.length&&i[0].tagName==="DIV",i.attr({"aria-owns":null,"aria-autocomplete":null,"aria-activedescendant":null,"aria-expanded":r?null:"false"}),k.getService().detachEvent(a.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantHandler)),this._options.close&&this._options.close(n,this._inputText))},n.prototype.handle=function(n){if(n.type==="blur")this._identityPickerDropdown.isVisible()&&!$(".identity-picker-dropdown:hover",this._getMenuContainer()).length&&this.close(n,this._inputText);else if(n.type==="keydown"&&!f.eventHasPrintableCharacter(n)){if(n.keyCode===p.KeyCode.ENTER||n.keyCode===p.KeyCode.TAB){var t=this._identityPickerDropdown.getSelectedItem();if(t)return this._selectIdentity(n,t),!1}return this._identityPickerDropdown.handleKeyEvent(n)}},n.prototype.dispose=function(){k.getService().detachEvent(a.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantHandler);this._identityPickerDropdown.dispose()},n.prototype.prefetch=function(){this._identityPickerDropdown&&this._identityPickerDropdown.load()},n.prototype._selectIdentity=function(n,t){var r=this,c=this._identityPickerDropdown.getSelectedIndex(),l=ft.getMentionTrigger(this._inputText.textBeforeSelection,!0),f=ft.getIdentityId(t),u="",o=function(t,i,f){var e,o,s;f&&(e={textBeforeSelection:r._inputText.textBeforeSelection.substr(0,l.index)+"@<"+t+u+"> ",textInSelection:"",textAfterSelection:r._inputText.textAfterSelection},r._inputText=e,r._options.select&&(o={getPlainText:function(){return e},getHtml:function(){return vt(f)}},s={selectionIndex:""+c,identity:f},r._options.select(n,o,s)),r.close(n,r._inputText),f.localId&&r._identityPickerDropdown.addIdentitiesToMru([f.localId]));r._identityPickerDropdown.hide()},s,h;ft.useStorageKeysInMentions()?(s=ot.getDefault(),t.localId?(h=s.addDisplayNameAndStorageKey(f,t.localId),o(h,u,t)):(e.EventLogging.publishMaterializeIdentityEvent({identity:t}),s.getStorageKeyFollowingMaterialization(t).then(function(n){return et.getInstance().getByUniqueId(n).then(function(t){if(t){var r=ft.getIdentityId(t),f=s.addDisplayNameAndStorageKey(r,n);return o(f,u,t),t}return i.reject("pickerIdentity is null after materialization")})}).then(null,function(n){r._handleMaterializationError(t,n,f);r._identityPickerDropdown.hide()}))):t.entityType===it.DirectoryEntityType.Group?(u=" "+ft.formatIdentityAttribute(t),o(f,u,t)):o(f,u,t)},n.prototype._handleMaterializationError=function(n,t,i){var r=$("<div>").css("font-weight","bold").html(w.format(b.MentionMaterializeIdentityFailError,lt.CSS_CLASS_PERSON_MENTION,w.htmlEncode(i))),u=function(){l.showMessageDialog(r,{title:b.MentionMaterializeErrorDialogTitle,buttons:[l.MessageDialog.buttons.close]}).then(function(){return null})};e.EventLogging.publishMaterializeIdentityError({identity:n,error:t});u(i)},n.prototype._getMenuContainer=function(){return this._options.menuContainer?this._options.menuContainer():$(document.body)},n.prototype._getMentionTextArea=function(){return this._options.textElement?this._options.textElement():null},n}();t.PersonAutocompleteProvider=yt;ct=function(){function n(){}return n.getDefault=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return ft.PersonArtifactType},n.prototype.renderPerson=function(t,i,r){var u,f;return r===void 0&&(r=!0),u=function(t){var e,f,u;return t?(e=ft.getIdentityId(t),f=$("<span>").addClass(n.CSS_CLASS_PERSON_MENTION).text("@"+t.displayName),e!==t.displayName&&f.attr("title",e),et.getInstance().isIdentityCurrentUser(t)&&f.addClass(n.CSS_CLASS_PERSON_MENTION_ME),u=i(f[0].outerHTML).attr("tabindex","0").attr("aria-label","@"+t.displayName),r&&(u.attr("role","button").addClass(n.CSS_CLASS_PERSON_MENTION_CLICKABLE),u.attr(n._IDENTITY_DATA_ATTRIBUTE,JSON.stringify(t)),n._registerMentionClickHandler(u,t)),{htmlComponent:u,displayText:"@"+t.displayName}):null},t?t.id?et.getInstance().getByUniqueId(t.id).then(function(n){return u(n)}):ft.useStorageKeysInMentions()?w.isGuid(t.name)?et.getInstance().getByUniqueId(t.name).then(function(n){return n&&ot.getDefault().addDisplayNameAndStorageKey(ft.getIdentityId(n),t.name),u(n)}):(f=ot.getDefault().getStorageKeyUsingDisplayName(t.name),f?et.getInstance().getByUniqueId(f).then(function(n){return u(n)}):et.getInstance().getByUniqueName(t.name).then(function(n){return u(n)})):et.getInstance().getByUniqueName(t.name).then(function(n){return u(n)}):void 0},n.prototype.renderMention=function(n,t,i){var s;i===void 0&&(i=!0);var h=ft.getMetadataFromTextMention(n.ArtifactId),e=ft.getDataFromMetadata(h,u.Constants.HTML_MENTION_ID_ATTR),f=n.ArtifactId,o=n.Text;return e&&(s=" "+ft.formatUniqueId(e),f=f.replace(s,""),o=o.replace(s,"")),this.renderPerson({name:f,id:e},t,i).then(function(n){if(!n){var i=$("<span>").text(o),r=t(i[0].outerHTML);return{htmlComponent:r,displayText:"@"+f}}return n})},n.prototype.getTelemetryMentionSummary=function(n){return this.getArtifactType()+":"+n.ArtifactId},n.registerMentionClickHandler=function(n,t){var i=$(n);this._registerMentionClickHandler($("."+this.CSS_CLASS_PERSON_MENTION_CLICKABLE,i),undefined,t)},n._registerMentionClickHandler=function(n,t,i){var r=this;n.click(function(n){var u=t;u||(u=JSON.parse(n.target.getAttribute(r._IDENTITY_DATA_ATTRIBUTE)));r._renderMentionDialog($(n.target),u,n,i)});n.keydown(function(n){var u=t;u||(u=JSON.parse(n.target.getAttribute(r._IDENTITY_DATA_ATTRIBUTE)));(n.which===s.KeyCode.ENTER||n.which===s.KeyCode.SPACE)&&r._renderMentionDialog($(n.target),u,n,i)})},n._renderMentionDialog=function(t,i,r,o){r.stopPropagation();var s=f.getWindow(t[0]),h=s&&window!==s&&s.frameElement?$(s.frameElement):null,l=c.Enhancement.enhance(a.IdCardDialog,"<div/>",{uniqueIdentifier:i.entityId,anchor:t,anchorContainer:h,xvalue:0,operationScope:st,identityType:ft.getSupportedEntityTypes(),httpClient:null,consumerId:u.Constants.IDENTITY_PICKER_CONSUMER_ID});l.getElement().closest(".ui-dialog").addClass(n.CSS_CLASS_PERSON_MENTION_CARD);e.EventLogging.publishPeopleClickEvent({identity:i},o)},n.CSS_CLASS_PERSON_MENTION="mention-preview-person",n.CSS_CLASS_PERSON_MENTION_ME="mention-preview-me",n.CSS_CLASS_PERSON_MENTION_CARD="mention-card",n.CSS_CLASS_PERSON_MENTION_CLICKABLE="mention-preview-person-clickable",n._IDENTITY_DATA_ATTRIBUTE="data-identity",n}();t.PeopleMentionsRenderingProvider=ct;lt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.renderMention=function(n,t){var i=ft.getMetadataFromTextMention(n.ArtifactId),f=i?ft.getDataFromMetadata(i,u.Constants.HTML_MENTION_ID_ATTR):ft.useStorageKeysInMentions()?ot.getDefault().getStorageKeyUsingDisplayName(n.ArtifactId):null,e=function(n){if(n){var i=vt(n),r=t(i);return{htmlComponent:r,displayText:"@"+n.displayName}}return null};return f?et.getInstance().getByUniqueId(f).then(function(n){return e(n)}):et.getInstance().getByUniqueName(n.ArtifactId).then(function(n){return e(n)})},t}(ct);t.PeopleHtmlMentionsRenderingProvider=lt;ht=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.getDefault=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.parseFromText=function(n){var r=[],i=ft.regexMention(),t;for(i.lastIndex=0;t=i.exec(n);)r.push({index:{start:t.index,end:i.lastIndex},id:t[4]||t[3]||t[2]||t[1]});return r},t.prototype.parseFromHtml=function(n,t){var i=this,f=n.find('a[href^="'+u.Constants.HTML_MENTION_LEGACY_FORMAT_HREF+'"]'),r;f.each(function(n,r){var u=$(r),f=i.parseFromMailtoAnchor(u);f&&t(u,f)});r=n.find("a["+u.Constants.HTML_MENTION_ATTR_NAME+'^="'+u.Constants.HTML_MENTION_VERSION_20+'"]');r.each(function(n,r){var u=$(r),f=i.parseFromAnchor(u);f&&t(u,f)})},t.prototype.getArtifactType=function(){return ft.PersonArtifactType},t.prototype.parseFromMailtoAnchor=function(n){var t=n.attr("href"),i=new o(t),r=n.attr(u.Constants.HTML_MENTION_ATTR_NAME),f=ft.getDataFromMetadata(r,u.Constants.HTML_MENTION_ID_ATTR);return{name:decodeURI(i.path()),id:f}},t.prototype.parseFromAnchor=function(n){var t=n.attr(u.Constants.HTML_MENTION_ATTR_NAME),i=ft.getVsidFromMetadata(t),r=n.text();return{name:r,id:i}},t}(u.ArtifactMentionParser);t.PeopleMentionParser=ht;pt=function(){function n(){}return n.processHtml=function(n,t){t===void 0&&(t=!0);ht.getDefault().parseFromHtml(n,function(n,i){ct.getDefault().renderPerson(i,function(n){return $("<span>").append(n)},t).then(function(t){t&&n.replaceWith(t.htmlComponent)})})},n}();t.PeopleMentionProcessor=pt;ot=function(){function n(){this.displayNameToStorageKeyMap={};this.storageKeyToDisplayNameMap={}}return n.getDefault=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.addDisplayNameAndStorageKey=function(n,t){var i=n;return t&&n&&w.isGuid(t)&&(this.isDisplayNameAndStorageKeyAlreadyAdded(t,n)||(i=this.checkIfDisplayNameExistsInMapAndMangle(n),this.displayNameToStorageKeyMap[i]=t.toUpperCase(),this.storageKeyToDisplayNameMap[t.toUpperCase()]={originalDisplayName:n,mangledDisplayName:i})),i},n.prototype.getDisplayNameRecordUsingStorageKeyAsync=function(n){var r=this,t;return n&&w.isGuid(n)?(t=n.toUpperCase(),this.storageKeyToDisplayNameMap[t]&&this.storageKeyToDisplayNameMap.hasOwnProperty(t)?i.resolve(this.storageKeyToDisplayNameMap[t]):et.getInstance().getByUniqueId(n).then(function(i){if(i){var u=ft.getIdentityId(i);return r.addDisplayNameAndStorageKey(u,n),r.storageKeyToDisplayNameMap[t]}return null},function(){return i.resolve(null)})):i.resolve(null)},n.prototype.getStorageKeyUsingDisplayName=function(n){return n&&this.displayNameToStorageKeyMap[n]&&this.displayNameToStorageKeyMap.hasOwnProperty(n)?this.displayNameToStorageKeyMap[n]:null},n.prototype.translateDisplayNamesToStorageKeys=function(n){var i=this,t=[],r=u.MentionProcessor.getDefault().parseCodeBlocksFromText(n),f=ht.getDefault().parseMentions(n,0,r);return f.forEach(function(n){var r,f;n.Type===u.TextPartType.Mention?(r=n,r.ArtifactType===ft.PersonArtifactType?(f=i.getStorageKeyUsingDisplayName(r.ArtifactId),f?t.push("@<"+f+">"):t.push(n.Text)):t.push(n.Text)):t.push(n.Text)}),t.join("")},n.prototype.translateStorageKeysToDisplayNames=function(n){var f=this,r=i.defer(),t=[],e=u.MentionProcessor.getDefault().parseCodeBlocksFromText(n),o=ht.getDefault().parseMentions(n,0,e);return o.forEach(function(n,r){if(n.Type===u.TextPartType.Mention){var e=n;t[r]=e.ArtifactType===ft.PersonArtifactType?f.getDisplayNameRecordUsingStorageKeyAsync(e.ArtifactId).then(function(t){return t&&t.mangledDisplayName?i.resolve("@<"+t.mangledDisplayName+">"):i.resolve(n.Text)}):i.resolve(n.Text)}else t[r]=i.resolve(n.Text)}),i.all(t).then(function(n){r.resolve(n.join(""))}),r.promise},n.prototype.getStorageKeyFollowingMaterialization=function(n){return at.getInstance().MaterializeIdentity(n).then(function(n){return n?n:i.reject("MaterializeIdentityProvider.MaterializeIdentity returned empty storageKey")})},n.prototype.isDisplayNameAndStorageKeyAlreadyAdded=function(n,t){return this.storageKeyToDisplayNameMap[n.toUpperCase()]&&this.storageKeyToDisplayNameMap.hasOwnProperty(n.toUpperCase())&&this.storageKeyToDisplayNameMap[n.toUpperCase()].originalDisplayName===t&&this.displayNameToStorageKeyMap[t]&&this.displayNameToStorageKeyMap.hasOwnProperty(t)&&this.displayNameToStorageKeyMap[t]===n.toUpperCase()},n.prototype.checkIfDisplayNameExistsInMapAndMangle=function(n){var t=n,i;if(this.displayNameToStorageKeyMap[n]&&this.displayNameToStorageKeyMap.hasOwnProperty(n))for(i=1,t=n+"("+i+")";this.displayNameToStorageKeyMap[t];)i++,t=n+"("+i+")";return t},n}();t.DisplayNameStorageKeyTranslationProvider=ot;at=function(){function n(){this._graphHttpClient=y.VssConnection.getConnection().getHttpClient(ut.GraphHttpClient,rt.ServiceInstanceTypes.SPS)}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.MaterializeIdentity=function(n){var t=this;if(n&&n.entityType&&n.originId){if(n.entityType===it.DirectoryEntityType.User)return this.MaterializeAadUser(n.originId).then(function(n){return t.getStorageKey(n)}).then(function(n){return n.value});if(n.entityType===it.DirectoryEntityType.Group)return this.MaterializeAadGroup(n.originId).then(function(n){return t.getStorageKey(n)}).then(function(n){return n.value})}return i.resolve(null)},n.prototype.MaterializeAadGroup=function(n){if(n)return this._graphHttpClient.createGroup({originId:n});throw new Error("Origin Id cannot be null or empty!");},n.prototype.MaterializeAadUser=function(n){if(n)return this._graphHttpClient.createUser({originId:n});throw new Error("Origin Id cannot be null or empty!");},n.prototype.getStorageKey=function(n){if(n)return this._graphHttpClient.getStorageKey(n.descriptor);throw new Error("Graph member cannot be null!");},n}();t.MaterializeIdentityProvider=at;et=function(){function n(){var t=this;this._cache=new u.ArtifactsCache(function(n){return t._loadPeople(n)},n.QUEUE_WAIT_MSEC,n.MAX_BATCH_SIZE);this._cacheById=new u.ArtifactsCache(function(n){return t._loadPeopleByIds(n)},n.QUEUE_WAIT_MSEC,n.MAX_BATCH_SIZE)}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return ft.PersonArtifactType},n.prototype.getByUniqueName=function(n){return this._cache.getArtifactPromise(n.toUpperCase())},n.prototype.getByUniqueId=function(n){return this._cacheById.getArtifactPromise(n.toUpperCase())},n.prototype.isIdentityCurrentUser=function(n){var t=h.getDefaultWebContext().user.id;return!t||!n||!n.localId?!1:t.toUpperCase()===n.localId.toUpperCase()},n.prototype._getIdentityPickerService=function(){return y.VssConnection.getConnection().getService(v.IdentityService)},n.prototype._loadPeople=function(n){var t={},e={},c=this._getIdentityPickerService(),r,u,o,f,s;for(n=n.map(function(n){return n.toUpperCase()}),r=0;r<n.length;r++)u=n[r],t[u]=i.defer(),e[u]=t[u].promise;o=n.join(";");f=c.getIdentities(o,st,ft.getSupportedEntityTypes());for(s in f)f[s].then(function(n){var u=n.queryToken.toUpperCase(),i,r;if(t.hasOwnProperty(u))if(i=t[u],n&&n.queryToken&&n.identities)if(h.getPageContext().webAccessConfiguration.isHosted)i.resolve(n.identities.length>0?n.identities.filter(function(t){return w.ignoreCaseComparer(t.signInAddress,n.queryToken)===0})[0]:null);else{r=u.split("\\");r.length!=2&&i.reject("Invalid unique ID");var e=r[0],o=r[1],f=n.identities.filter(function(n){return w.ignoreCaseComparer(n.samAccountName,o)==0&&w.ignoreCaseComparer(n.scopeName,e)==0});i.resolve(f.length>0?f[0]:null)}else i.reject("Invalid result object")},function(i){n.forEach(function(n){t[n].reject(i)})});return e},n.prototype._loadPeopleByIds=function(n){var t={},f={},s=this._getIdentityPickerService(),r,u,o;for(n=n.map(function(n){return n.toUpperCase()}),r=0;r<n.length;r++)u=n[r],t[u]=i.defer(),f[u]=t[u].promise;var h=n.join(";"),e=s.getIdentities(h,st,ft.getSupportedEntityTypes(),undefined,{UID:!0});for(o in e)e[o].then(function(n){var r=n.queryToken.toUpperCase(),i;t.hasOwnProperty(r)&&(i=t[r],n&&n.queryToken&&n.identities?i.resolve(n.identities.length>0?n.identities[0]:null):i.reject("Invalid result object"))},function(i){n.forEach(function(n){t[n].reject(i)})});return f},n.QUEUE_WAIT_MSEC=10,n.MAX_BATCH_SIZE=50,n}();t.PeopleProvider=et;t.createPeopleHtmlMention=vt;t.getDisplayNameStorageKeyTranslatorInstance=bt});

define("Mention/Scripts/TFS.Mention.People.Registration",["require","exports","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.People"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});i.MentionProcessor.getDefault().registerParser(r.PeopleMentionParser.getDefault);i.MentionsRenderer.getDefault().registerProvider(r.PeopleMentionsRenderingProvider.getDefault);i.MentionProcessor.getDefault().setMentionTranslationProvider(r.DisplayNameStorageKeyTranslationProvider.getDefault())});

define("VersionControl/Scripts/Mentions/PullRequestMentionParser",["require","exports","Mention/Scripts/TFS.Mention"],function(n,t,i){function u(){return new r}Object.defineProperty(t,"__esModule",{value:!0});var r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.parseFromText=function(n){for(var u=[],f=new RegExp("("+i.Constants.PATTERN_WORD_START_SEPARATOR+")!([0-9]{1,10})(?=("+i.Constants.PATTERN_WORD_END_SEPARATOR+"))","ig"),t;t=f.exec(n);){var e=t.index,o=f.lastIndex,r=t[1];r&&r.length&&(e+=r.length);u.push({index:{start:e,end:o},id:t[2]})}return u},t.prototype.getArtifactType=function(){return"PullRequest"},t}(i.ArtifactMentionParser);t.PullRequestMentionParser=r;t.createParser=u});

define("VersionControl/Scripts/Mentions/PullRequestMentionDataProvider",["require","exports","q","VSS/Service","VSS/Utils/String","TFS/VersionControl/GitRestClient","VersionControl/Scripts/VersionControlUrls","TFS/VersionControl/Contracts","Mention/Scripts/TFS.Mention.Helpers","VSS/Utils/Array"],function(n,t,i,r,u,f,e,o,s,h){function c(n,t){return n&&n.original&&t&&t.original&&n.original.id-t.original.id}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function n(){this._gitRestClient=r.getClient(f.GitHttpClient,s.getMainTfsContext().contextData);this._dataCache={}}return n.instance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.initializeMyPullRequests=function(){var n=s.getMainTfsContext();if(!n.contextData.project||!n.contextData.project.id){this._myPRs=i.resolve([]);return}var t={repositoryId:null,includeLinks:!1,status:o.PullRequestStatus.All,creatorId:n.currentIdentity.id,reviewerId:null,sourceRefName:null,targetRefName:null,sourceRepositoryId:null},r={repositoryId:null,includeLinks:!1,status:o.PullRequestStatus.All,creatorId:null,reviewerId:n.currentIdentity.id,sourceRefName:null,targetRefName:null,sourceRepositoryId:null},u=this._gitRestClient.getPullRequestsByProject(n.contextData.project.id,t,0,0,20).then(function(t){return t.map(function(t){return{title:t.title,id:t.pullRequestId,url:e.getPullRequestUrlUsingRepoId(t.repository.id,t.repository.project.id,t.pullRequestId,n,{project:t.repository.project.id,includeTeam:!1})}})}),f=this._gitRestClient.getPullRequestsByProject(n.contextData.project.id,r,0,0,10).then(function(t){return t.map(function(t){return{title:t.title,id:t.pullRequestId,url:e.getPullRequestUrlUsingRepoId(t.repository.id,t.repository.project.id,t.pullRequestId,n,{project:t.repository.project.id,includeTeam:!1})}})});this._myPRs=i.allSettled([u,f]).then(function(n){var t=[];return n.forEach(function(n){n.state=="fulfilled"&&(t=h.union(t,n.value,c))}),t},function(){return[]})},n.prototype.getPullRequests=function(n){var r=this,t={};return n.forEach(function(n){r._dataCache[n.toString()]?t[n]=r._dataCache[n.toString()]:(t[n]=n>0?r._gitRestClient.getPullRequestById(n).then(function(n){return{title:n.title,id:n.pullRequestId,url:e.getPullRequestUrlUsingRepoId(n.repository.id,n.repository.project.id,n.pullRequestId,s.getMainTfsContext(),{project:n.repository.project.id,includeTeam:!1})}},function(){return null}):i.resolve(null),r._dataCache[n.toString()]=t[n])}),t},n.prototype.searchPullRequests=function(n){var t=this,r=Object.keys(this._dataCache).map(function(n){return t._dataCache[n]});return i.allSettled(r).then(function(i){var r=[];return i.forEach(function(i){if(i.state==="fulfilled"&&i.value){var u=i.value;t._shouldIncludePR(u,n)&&r.push({original:u,highlighted:u})}}),r}).then(function(i){var r=[];return t._myPRs.then(function(u){return u.forEach(function(i){t._shouldIncludePR(i,n)&&r.push({original:i,highlighted:i})}),h.union(i,r,c)})})},n.prototype._shouldIncludePR=function(n,t){return t===""||u.caseInsensitiveContains(n.title,t)||u.caseInsensitiveContains(n.id.toString(),t)},n}();t.PullRequestMentionDataProvider=l});

define("VersionControl/Scripts/Mentions/PullRequestMentionRenderer",["require","exports","VersionControl/Scripts/Mentions/PullRequestMentionDataProvider","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VSS/Utils/UI","VSS/Navigation/HubsService","VSS/Service","VersionControl/Scripts/CodeHubContributionIds"],function(n,t,i,r,u,f,e,o){function h(){return new s}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function n(){}return n.prototype.dispose=function(){},n.prototype.getArtifactType=function(){return"PullRequest"},n.prototype.renderMention=function(n){return this.findPullRequestById(n.ArtifactId).then(function(n){var i='<a class="mention-widget-item" href="'+n.url+'"><i class="bowtie-icon bowtie-tfvc-pull-request pr-icon"/>'+('<span class="mention-widget-typeid">'+r.PullRequest_PRText+" "+n.id+": <\/span>")+('<span class="mention-widget-title">'+u.htmlEncode(n.title)+"<\/span>")+"<\/a>",t=$(i);return t.click(e.getLocalService(f.HubsService).getHubNavigateHandler(o.CodeHubContributionIds.pullRequestHub,n.url)),{htmlComponent:t,displayText:r.PullRequest_PRText+" "+n.id+": "+u.htmlEncode(n.title)}})},n.prototype.getTelemetryMentionSummary=function(n){return this.getArtifactType()+":"+n.ArtifactId},n.prototype.findPullRequestById=function(n){var t=parseInt(n);return i.PullRequestMentionDataProvider.instance().getPullRequests([t])[t]},n}();t.PullRequestMentionsRenderer=s;t.createRenderer=h});

if (window.performance && window.performance.mark) { window.performance.mark('endLoadBundleInner-async'); }