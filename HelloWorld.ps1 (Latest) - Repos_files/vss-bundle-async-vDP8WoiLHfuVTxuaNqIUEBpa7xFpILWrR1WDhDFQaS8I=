if (window.performance && window.performance.mark) { window.performance.mark('startLoadBundleInner-async'); }
// Copyright (C) Microsoft Corporation. All rights reserved.
define("VersionControl/Scenarios/Shared/Committing/TextFieldParentAddon",["require","exports","VSSUI/Tooltip","react","VersionControl/Scripts/VersionControlPath","VSS/LoaderPlugins/Css!VersionControl/Shared/Committing/TextFieldParentAddon"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.TextFieldParentAddon=function(n){return r.createElement(i.TooltipHost,{hostClassName:"vc-text-field-parent-addon",content:n.prefix,overflowMode:i.TooltipOverflowMode.Self},u.addTrailingSlash(n.prefix))}});

var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};define("VersionControl/Scenarios/Explorer/Components/AddNewFileDialog",["require","exports","OfficeFabric/Button","OfficeFabric/Dialog","OfficeFabric/TextField","OfficeFabric/Utilities","react","VSS/Utils/String","VSS/Utils/UI","VersionControl/Scenarios/Shared/Committing/TextFieldParentAddon","VersionControl/Scripts/RepositoryContext","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/VersionControlPath","VSS/LoaderPlugins/Css!VersionControl/AddNewFileDialog"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function v(n){return n=n.trim(),function(t,i){var r=g(n,i,i.isCreatingFolder&&t.placeholderName);return p(i,__assign({},t,{newFileName:n,newFileNameErrorMessage:r}))}}function y(n){return n=n.trim(),function(t,i){var r=i.isCreatingFolder&&tt(n,i,t.newFileName);return p(i,__assign({},t,{placeholderName:n,placeholderNameErrorMessage:r}))}}function p(n,t){return __assign({},t,{isValid:t.newFileName&&!t.newFileNameErrorMessage&&(!n.isCreatingFolder||t.placeholderName&&!t.placeholderNameErrorMessage)})}function g(n,t,i){var r,u,f;return!n||it(n,a.pathSeparator)?o.format(l.ValidationMessageIsRequired,b(t)):(r=a.validatePartialPath(n,t.folderPath,t.isGit?c.RepositoryType.Git:c.RepositoryType.Tfvc),r)?r:(u=a.validateMaxLength(t.folderPath,n,t.isCreatingFolder&&i),u)?u:t.fileUsedAsFolder?o.format(l.AddFileDialogFileUsedAsFolder,a.getFileName(t.fileUsedAsFolder)):(f=a.combinePaths(t.folderPath,n),t.isLoadingChildItems||t.newSubfolder!==a.getFolderName(n))?l.AddFileDialogSubfolderVerifying:nt(f,t)?o.format(l.AddFileDialogAlreadyExistsErrorFormat,f):void 0}function nt(n,t){var i=t.existingPaths.filter(function(t){return o.localeIgnoreCaseComparer(t,n)===0});return i.length>0}function tt(n,t,i){var r,u;return t.isCreatingFolder?n?(r=a.validateFilename(n,t.folderPath,t.isGit?c.RepositoryType.Git:c.RepositoryType.Tfvc),r)?r:(u=a.validateMaxLength(t.folderPath,i,n),u?u:void 0):o.format(l.ValidationMessageIsRequired,l.AddFileDialogFilenameLabel):undefined}function w(n,t){t.onAddNewFile(a.combinePaths(t.folderPath,n.newFileName,t.isCreatingFolder&&n.placeholderName))}function b(n){var t=n.isCreatingFolder;return t?l.AddFileDialogFolderNameLabel:l.AddFileDialogFilenameLabel}function it(n,t){return n.substr(-t.length)===t}Object.defineProperty(t,"__esModule",{value:!0});t.initialState={newFileName:"",newFileNameErrorMessage:undefined,placeholderName:"",placeholderNameErrorMessage:undefined,isValid:!1};var k=800,d=function(n){function o(){var i=n!==null&&n.apply(this,arguments)||this;return i.state=t.initialState,i.lastTriggeredNewSubfolder="",i.onKeyDown=function(n){n.which===s.KeyCode.ENTER&&i.state.isValid&&i.addNewFile()},i.addNewFile=function(){w(i.state,i.props)},i.editNewFileName=function(n){i.setState(v(n),i.debouncedOnTargetFolderChanged)},i.editPlaceholderName=function(n){i.setState(y(n))},i.onTargetFolderChanged=function(){var n=a.getFolderName(i.state.newFileName);if(n!==i.lastTriggeredNewSubfolder){i.lastTriggeredNewSubfolder=n;i.props.onTargetFolderChanged(n)}},i.debouncedOnTargetFolderChanged=(new f.Async).debounce(i.onTargetFolderChanged,k,{trailing:!0}),i}return __extends(o,n),o.prototype.componentWillReceiveProps=function(n){n.existingPaths!==this.props.existingPaths&&this.setState(function(t){if(t.newFileName){var i=v(t.newFileName);return i(t,n)}})},o.prototype.render=function(){return e.createElement(r.Dialog,{modalProps:{containerClassName:"vc-add-new-file-dialog",isBlocking:!0},hidden:!1,dialogContentProps:{type:r.DialogType.close},title:this.props.isCreatingFolder?l.AddNewFolder:l.AddNewFile,firstFocusableSelector:"file-name-input",closeButtonAriaLabel:l.DialogClose,onDismiss:this.props.onDismiss},e.createElement(u.TextField,{className:"new-file-name-fixed-container",label:b(this.props),value:this.state.newFileName,required:!0,errorMessage:this.state.newFileNameErrorMessage,prefix:this.props.folderPath,onRenderPrefix:this.props.folderPath&&h.TextFieldParentAddon,description:l.AddFileDialogSubfolderDescription,inputClassName:"file-name-input",onChanged:this.editNewFileName,onKeyDown:this.onKeyDown}),this.props.isCreatingFolder&&e.createElement(u.TextField,{className:"new-placeholder-name-fixed-container",label:l.AddFileDialogFilenameLabel,value:this.state.placeholderName,required:!0,errorMessage:this.state.placeholderNameErrorMessage,description:l.AddFileDialogGitPlaceholderDescription,onChanged:this.editPlaceholderName,onKeyDown:this.onKeyDown}),e.createElement(r.DialogFooter,null,e.createElement(i.PrimaryButton,{disabled:!this.state.isValid,onClick:this.addNewFile},l.ModalDialogCreateButton),e.createElement(i.DefaultButton,{onClick:this.props.onDismiss},l.EditFileCancel)))},o}(e.PureComponent);t.AddNewFileDialog=d;t.getNewFileNameUpdater=v;t.getPlaceholderNameUpdater=y;t.triggerOnAddNewFile=w});

if (window.performance && window.performance.mark) { window.performance.mark('endLoadBundleInner-async'); }